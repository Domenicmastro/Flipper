<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets/app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:3,&quot;tests&quot;:31,&quot;passes&quot;:31,&quot;pending&quot;:0,&quot;failures&quot;:0,&quot;start&quot;:&quot;2025-08-23T22:27:20.989Z&quot;,&quot;end&quot;:&quot;2025-08-23T22:27:30.806Z&quot;,&quot;duration&quot;:9817,&quot;testsRegistered&quot;:31,&quot;passPercent&quot;:100,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false},&quot;results&quot;:[{&quot;uuid&quot;:&quot;41ebd11f-b022-47c3-94f1-5a2c6eb37012&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;fullTitle&quot;:&quot;\&quot;before all\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Initialize Firebase Admin SDK (only once)\nif (!getAdminApps().length) {\n    initAdminApp({\n        credential: cert(path.join(__dirname, \&quot;../config/firebase-service-account.json\&quot;)),\n        projectId: \&quot;flipper-ae6d1\&quot;,\n    });\n    console.log(\&quot;âœ… Firebase Admin SDK initialized\&quot;);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f971fdd4-2bdf-44eb-a0d3-4b8420a80790&quot;,&quot;parentUUID&quot;:&quot;41ebd11f-b022-47c3-94f1-5a2c6eb37012&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;fullTitle&quot;:&quot;\&quot;after all\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Clean up Admin SDK apps\nfor (const app of getAdminApps()) {\n    await deleteApp(app);\n}\nconsole.log(\&quot;ðŸ§¹ Firebase Admin SDK apps deleted\&quot;);\n// Delete Firebase Client SDK apps\nfor (const app of getClientApps()) {\n    await deleteClientApp(app);\n}\nconsole.log(\&quot;ðŸ§¹ Firebase Client SDK apps deleted\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2bd0bf42-d410-4d9b-a61b-ba411d081052&quot;,&quot;parentUUID&quot;:&quot;41ebd11f-b022-47c3-94f1-5a2c6eb37012&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;50bb0a49-83ff-49e1-9ba1-8c59134a3939&quot;,&quot;title&quot;:&quot;Testing product functionality through API routes&quot;,&quot;fullFile&quot;:&quot;/app/src/backend/tests/integration/api-products.test.ts&quot;,&quot;file&quot;:&quot;/src/backend/tests/integration/api-products.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;Testing product functionality through API routes\&quot;&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through API routes \&quot;before each\&quot; hook in \&quot;Testing product functionality through API routes\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:74,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;product = await addProduct(testProduct);\nproductId = product.id;\nproductIds.push(productId);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d74194af-d042-49b6-a6c5-18b62ef0e552&quot;,&quot;parentUUID&quot;:&quot;50bb0a49-83ff-49e1-9ba1-8c59134a3939&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;Testing product functionality through API routes\&quot;&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through API routes \&quot;after each\&quot; hook in \&quot;Testing product functionality through API routes\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:82,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await Promise.all(productIds.map((id) =&gt; deleteProduct(id)));\nproductIds.length = 0; // clear the array&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;da9c389f-e28f-4468-b23f-cb41aa99b81e&quot;,&quot;parentUUID&quot;:&quot;50bb0a49-83ff-49e1-9ba1-8c59134a3939&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should add product&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through API routes should add product&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:259,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testProductNew = {\n    name: \&quot;Another Test Chair\&quot;,\n    description: \&quot;A comfy test chair\&quot;,\n    price: 49.99,\n    sellerId: \&quot;user123\&quot;,\n    status: \&quot;For Sale\&quot;,\n    tags: [\&quot;test\&quot;, \&quot;chair\&quot;],\n    categories: [Category.Accessories],\n    images: [\&quot;\&quot;],\n    embedding: [],\n    condition: \&quot;New\&quot;,\n    location: testLocation,\n    attributes: [testAttribute],\n    priceComparisons: [],\n};\nconst res = await request(app)\n    .post(\&quot;/api/products\&quot;)\n    .send({ product: testProductNew })\n    .set(\&quot;Content-Type\&quot;, \&quot;application/json\&quot;)\n    .set(\&quot;Accept\&quot;, \&quot;application/json\&quot;);\nexpect(res.status).to.equal(200);\nconst newProduct = res.body;\nif (newProduct)\n    productIds.push(newProduct.id);\nexpect(newProduct.name).to.equal(\&quot;Another Test Chair\&quot;);\nexpect(newProduct.createdAt).to.exist;\nexpect(newProduct.updatedAt).to.exist;\nexpect(newProduct.id).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c8713dc0-080f-49df-b020-3f41d319cda1&quot;,&quot;parentUUID&quot;:&quot;50bb0a49-83ff-49e1-9ba1-8c59134a3939&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fetch all products&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through API routes should fetch all products&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:328,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app).get(\&quot;/api/products\&quot;);\nexpect(res.status).to.equal(200);\nexpect(res.body).to.be.an(\&quot;array\&quot;);\nexpect(res.body.length).to.be.gte(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;97104c0f-cbf1-4316-a6e5-61edf8213d58&quot;,&quot;parentUUID&quot;:&quot;50bb0a49-83ff-49e1-9ba1-8c59134a3939&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get product by product ID&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through API routes should get product by product ID&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:36,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app).get(`/api/products/by-id/${productId}`);\nexpect(res.status).to.equal(200);\nconst fetchedProduct = res.body;\nexpect(fetchedProduct).to.exist;\nexpect(fetchedProduct.id).to.equal(productId);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;152d987e-7fd3-40ab-885d-98c5c5622c77&quot;,&quot;parentUUID&quot;:&quot;50bb0a49-83ff-49e1-9ba1-8c59134a3939&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get products by category ID&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through API routes should get products by category ID&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:107,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app).get(`/api/products/by-category/${testCategoryId}`);\nexpect(res.status).to.equal(200);\nexpect(res.body).to.be.an(\&quot;array\&quot;);\nexpect(res.body.length).to.be.gte(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;acf56925-34b9-49e8-8492-306cc5e39539&quot;,&quot;parentUUID&quot;:&quot;50bb0a49-83ff-49e1-9ba1-8c59134a3939&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get products by seller ID&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through API routes should get products by seller ID&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:66,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app).get(`/api/products/by-seller-id/${testProduct.sellerId}`);\nexpect(res.status).to.equal(200);\nexpect(res.body).to.be.an(\&quot;array\&quot;);\nexpect(res.body.length).to.be.gte(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3fedcf11-edc1-4b2a-aaf7-8a55e67d75d6&quot;,&quot;parentUUID&quot;:&quot;50bb0a49-83ff-49e1-9ba1-8c59134a3939&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get products by tag&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through API routes should get products by tag&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:57,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const tag = testProduct.tags[0];\nconst res = await request(app).get(`/api/products/by-tag/${tag}`);\nexpect(res.status).to.equal(200);\nexpect(res.body).to.be.an(\&quot;array\&quot;);\nexpect(res.body.length).to.be.gte(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5bb1f25b-18d0-40cc-a38a-80120e6ac39a&quot;,&quot;parentUUID&quot;:&quot;50bb0a49-83ff-49e1-9ba1-8c59134a3939&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should search product by &#x27;chair&#x27;&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through API routes should search product by &#x27;chair&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:74,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app)\n    .get(\&quot;/api/products/search-products\&quot;)\n    .query({ input: \&quot;chair\&quot; });\nexpect(res.status).to.equal(200);\nexpect(res.body).to.be.an(\&quot;array\&quot;);\nconst found = res.body.some((p) =&gt; p.name.toLowerCase().includes(\&quot;chair\&quot;));\nexpect(found).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cbabd6de-b917-4929-bb5a-2a2f782aec79&quot;,&quot;parentUUID&quot;:&quot;50bb0a49-83ff-49e1-9ba1-8c59134a3939&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update price and status&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through API routes should update price and status&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:153,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const updates = { updates: { status: \&quot;Sold\&quot;, price: 3.99 } };\nconst res = await request(app)\n    .patch(`/api/products/by-id/${productId}`)\n    .send(updates)\n    .set(\&quot;Accept\&quot;, \&quot;application/json\&quot;);\nexpect(res.status).to.equal(200);\nconst updatedProduct = res.body;\nexpect(updatedProduct.price).to.equal(3.99);\nexpect(updatedProduct.status).to.equal(\&quot;Sold\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;15cccbe1-b408-48a6-963c-75f059c2fbeb&quot;,&quot;parentUUID&quot;:&quot;50bb0a49-83ff-49e1-9ba1-8c59134a3939&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should delete product&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through API routes should delete product&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:122,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;console.log(\&quot;product ID (test): \&quot;, productId);\nconst deleteRes = await request(app).delete(`/api/products/by-id/${productId}`);\nexpect(deleteRes.status).to.equal(204);\nconst getRes = await request(app).get(`/api/products/by-id/${productId}`);\nexpect(getRes.status).to.equal(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d006e7f5-8253-47e5-ac9d-b70e43af360d&quot;,&quot;parentUUID&quot;:&quot;50bb0a49-83ff-49e1-9ba1-8c59134a3939&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail to delete same product twice&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through API routes should fail to delete same product twice&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:128,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// First delete\nconst deleteRes1 = await request(app).delete(`/api/products/by-id/${productId}`);\nexpect(deleteRes1.status).to.equal(204);\nconst deleteRes2 = await request(app).delete(`/api/products/by-id/${productId}`);\nexpect(deleteRes2.status).to.equal(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ab5178f5-5cdb-40ac-8910-a109ca365942&quot;,&quot;parentUUID&quot;:&quot;50bb0a49-83ff-49e1-9ba1-8c59134a3939&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should place bid on auctioned item&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through API routes should place bid on auctioned item&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:250,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//\nconst testProductNew = {\n    name: \&quot;Another Test Chair (Auctionable)\&quot;,\n    description: \&quot;A comfy test chair\&quot;,\n    price: 49.99,\n    sellerId: \&quot;user123\&quot;,\n    status: \&quot;For Sale\&quot;,\n    tags: [\&quot;test\&quot;, \&quot;chair\&quot;],\n    categories: [Category.Accessories],\n    images: [\&quot;\&quot;],\n    embedding: [],\n    condition: \&quot;New\&quot;,\n    location: testLocation,\n    attributes: [testAttribute],\n    priceComparisons: [],\n    isAuction: true,\n    startingBid: 49.99,\n    currentBid: 0.0,\n    bidCount: 0,\n};\nconst resAdd = await request(app)\n    .post(\&quot;/api/products\&quot;)\n    .send({ product: testProductNew })\n    .set(\&quot;Content-Type\&quot;, \&quot;application/json\&quot;)\n    .set(\&quot;Accept\&quot;, \&quot;application/json\&quot;);\nexpect(resAdd.status).to.equal(200);\nconst newProduct = resAdd.body;\nif (newProduct)\n    productIds.push(newProduct.id);\nconst resBid = await request(app)\n    .post(`/api/bids/${newProduct.id}/bid`)\n    .send({\n    amount: 50.0,\n    userId: \&quot;user123\&quot;,\n})\n    .set(\&quot;Accept\&quot;, \&quot;application/json\&quot;);\nexpect(resBid.status).to.equal(200);\nconst auctionedProduct = resBid.body;\nif (!auctionedProduct) {\n    throw new Error(\&quot;Auctioned product should exist!\&quot;);\n}\nexpect(auctionedProduct.currentBid).to.equal(50.0);\nexpect(auctionedProduct.bidderId).to.equal(\&quot;user123\&quot;);\nexpect(auctionedProduct.bidCount).to.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;db82b11e-88d3-4590-87f5-1bda3136c26c&quot;,&quot;parentUUID&quot;:&quot;50bb0a49-83ff-49e1-9ba1-8c59134a3939&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not be able to bid less than current bid&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through API routes should not be able to bid less than current bid&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:120,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//\nconst testProductNew = {\n    name: \&quot;Another Test Chair (Auctionable)\&quot;,\n    description: \&quot;A comfy test chair\&quot;,\n    price: 49.99,\n    sellerId: \&quot;user123\&quot;,\n    status: \&quot;For Sale\&quot;,\n    tags: [\&quot;test\&quot;, \&quot;chair\&quot;],\n    categories: [Category.Accessories],\n    images: [\&quot;\&quot;],\n    embedding: [],\n    condition: \&quot;New\&quot;,\n    location: testLocation,\n    attributes: [testAttribute],\n    priceComparisons: [],\n    isAuction: true,\n    startingBid: 49.99,\n    currentBid: 60.0,\n    bidCount: 3,\n};\nconst resAdd = await request(app)\n    .post(\&quot;/api/products\&quot;)\n    .send({ product: testProductNew })\n    .set(\&quot;Content-Type\&quot;, \&quot;application/json\&quot;)\n    .set(\&quot;Accept\&quot;, \&quot;application/json\&quot;);\nexpect(resAdd.status).to.equal(200);\nconst newProduct = resAdd.body;\nif (newProduct)\n    productIds.push(newProduct.id);\ntry {\n    const resBid = await request(app)\n        .post(`/api/bids/${newProduct.id}/bid`)\n        .send({\n        amount: 50.0,\n        userId: \&quot;user123\&quot;,\n    })\n        .set(\&quot;Accept\&quot;, \&quot;application/json\&quot;);\n    expect(resBid.status).to.equal(400);\n}\ncatch (error) {\n    // pass!\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;38523b80-74d9-4545-b789-50561f79c044&quot;,&quot;parentUUID&quot;:&quot;50bb0a49-83ff-49e1-9ba1-8c59134a3939&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not be able to bid on non-auctionable product&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through API routes should not be able to bid on non-auctionable product&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:125,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//\nconst testProductNew = {\n    name: \&quot;Another Test Chair (Auctionable)\&quot;,\n    description: \&quot;A comfy test chair\&quot;,\n    price: 49.99,\n    sellerId: \&quot;user123\&quot;,\n    status: \&quot;For Sale\&quot;,\n    tags: [\&quot;test\&quot;, \&quot;chair\&quot;],\n    categories: [Category.Accessories],\n    images: [\&quot;\&quot;],\n    embedding: [],\n    condition: \&quot;New\&quot;,\n    location: testLocation,\n    attributes: [testAttribute],\n    priceComparisons: [],\n    isAuction: false,\n};\nconst resAdd = await request(app)\n    .post(\&quot;/api/products\&quot;)\n    .send({ product: testProductNew })\n    .set(\&quot;Content-Type\&quot;, \&quot;application/json\&quot;)\n    .set(\&quot;Accept\&quot;, \&quot;application/json\&quot;);\nexpect(resAdd.status).to.equal(200);\nconst newProduct = resAdd.body;\nif (newProduct)\n    productIds.push(newProduct.id);\ntry {\n    const resBid = await request(app)\n        .post(`/api/bids/${newProduct.id}/bid`)\n        .send({\n        amount: 50.0,\n        userId: \&quot;user123\&quot;,\n    })\n        .set(\&quot;Accept\&quot;, \&quot;application/json\&quot;);\n    expect(resBid.status).to.equal(400);\n}\ncatch (error) {\n    // pass!\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4991e17e-4b57-4b1e-aba6-77be4e20cd35&quot;,&quot;parentUUID&quot;:&quot;50bb0a49-83ff-49e1-9ba1-8c59134a3939&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c8713dc0-080f-49df-b020-3f41d319cda1&quot;,&quot;97104c0f-cbf1-4316-a6e5-61edf8213d58&quot;,&quot;152d987e-7fd3-40ab-885d-98c5c5622c77&quot;,&quot;acf56925-34b9-49e8-8492-306cc5e39539&quot;,&quot;3fedcf11-edc1-4b2a-aaf7-8a55e67d75d6&quot;,&quot;5bb1f25b-18d0-40cc-a38a-80120e6ac39a&quot;,&quot;cbabd6de-b917-4929-bb5a-2a2f782aec79&quot;,&quot;15cccbe1-b408-48a6-963c-75f059c2fbeb&quot;,&quot;d006e7f5-8253-47e5-ac9d-b70e43af360d&quot;,&quot;ab5178f5-5cdb-40ac-8910-a109ca365942&quot;,&quot;db82b11e-88d3-4590-87f5-1bda3136c26c&quot;,&quot;38523b80-74d9-4545-b789-50561f79c044&quot;,&quot;4991e17e-4b57-4b1e-aba6-77be4e20cd35&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1825,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;81c25c5e-ba12-461d-9dc9-d5d6b973b052&quot;,&quot;title&quot;:&quot;User Routes (with auth)&quot;,&quot;fullFile&quot;:&quot;/app/src/backend/tests/integration/api-user.test.ts&quot;,&quot;file&quot;:&quot;/src/backend/tests/integration/api-user.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;User Routes (with auth)\&quot;&quot;,&quot;fullTitle&quot;:&quot;User Routes (with auth) \&quot;before all\&quot; hook in \&quot;User Routes (with auth)\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1157,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(10000);\nif (!getAdminApps().length) {\n    // Only initialize if not initialized yet, with projectId here if you want\n    initAdminApp({\n        credential: cert(path.join(__dirname, \&quot;../config/firebase-service-account.json\&quot;)),\n        projectId: \&quot;flipper-ae6d1\&quot;,\n    });\n}\nconst adminAuth = admin.auth();\nconst userRecord = await adminAuth.createUser({\n    email: testUser.email,\n    password: \&quot;testpassword\&quot;,\n    displayName: testUser.name,\n});\ntestUserId = userRecord.uid;\ntestUser.id = testUserId;\nconst customToken = await adminAuth.createCustomToken(testUserId);\nconst fetch = (await import(\&quot;node-fetch\&quot;)).default;\nconst apiKey = firebaseConfig.apiKey;\nconst response = await fetch(`https://identitytoolkit.googleapis.com/v1/accounts:signInWithCustomToken?key=${apiKey}`, {\n    method: \&quot;POST\&quot;,\n    headers: { \&quot;Content-Type\&quot;: \&quot;application/json\&quot; },\n    body: JSON.stringify({ token: customToken, returnSecureToken: true }),\n});\nconst data = (await response.json());\nidToken = data.idToken;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f8432ed7-49b9-493d-80b5-2e87baf30f41&quot;,&quot;parentUUID&quot;:&quot;81c25c5e-ba12-461d-9dc9-d5d6b973b052&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;User Routes (with auth)\&quot;&quot;,&quot;fullTitle&quot;:&quot;User Routes (with auth) \&quot;after all\&quot; hook in \&quot;User Routes (with auth)\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:602,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;if (createdUserId)\n    await admin.auth().deleteUser(createdUserId).catch(console.error);\nif (testUserId)\n    await admin.auth().deleteUser(testUserId).catch(console.error);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;81d5fbfa-bea5-48f4-9bea-524e7d5a29d9&quot;,&quot;parentUUID&quot;:&quot;81c25c5e-ba12-461d-9dc9-d5d6b973b052&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a user (POST /users) with auth&quot;,&quot;fullTitle&quot;:&quot;User Routes (with auth) should create a user (POST /users) with auth&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:137,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app)\n    .post(\&quot;/api/users\&quot;)\n    .set(\&quot;Authorization\&quot;, `Bearer ${idToken}`)\n    .send({ user: testUser });\nexpect(res.status).to.equal(200);\nexpect(res.body).to.have.property(\&quot;id\&quot;, testUserId);\ncreatedUserId = res.body.id;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d7f5c836-df0b-4fcb-97f0-0c55c47d5df7&quot;,&quot;parentUUID&quot;:&quot;81c25c5e-ba12-461d-9dc9-d5d6b973b052&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get user by id (PUT /users/get-or-create/:userId) without auth&quot;,&quot;fullTitle&quot;:&quot;User Routes (with auth) should get user by id (PUT /users/get-or-create/:userId) without auth&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:38,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app).put(`/api/users/get-or-create/${testUserId}`);\nexpect(res.status).to.equal(200);\nexpect(res.body).to.have.property(\&quot;id\&quot;, testUserId);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d3e3b917-4527-423c-b1d4-7a11f7ac9041&quot;,&quot;parentUUID&quot;:&quot;81c25c5e-ba12-461d-9dc9-d5d6b973b052&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update user info (PATCH /users/by-id/:userId) with auth&quot;,&quot;fullTitle&quot;:&quot;User Routes (with auth) should update user info (PATCH /users/by-id/:userId) with auth&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:45,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const updates = { bio: \&quot;Updated bio\&quot; };\nconst res = await request(app)\n    .patch(`/api/users/by-id/${testUserId}`)\n    .set(\&quot;Authorization\&quot;, `Bearer ${idToken}`)\n    .send({ updates });\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e304640c-691e-4f30-8c5d-ff6eacc66562&quot;,&quot;parentUUID&quot;:&quot;81c25c5e-ba12-461d-9dc9-d5d6b973b052&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should NOT update user info with invalid auth&quot;,&quot;fullTitle&quot;:&quot;User Routes (with auth) should NOT update user info with invalid auth&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const updates = { bio: \&quot;Fail update\&quot; };\nconst res = await request(app)\n    .patch(`/api/users/by-id/${testUserId}`)\n    .set(\&quot;Authorization\&quot;, `Bearer invalidtoken`)\n    .send({ updates });\nexpect(res.status).to.equal(401);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;79bc1563-9ba0-4c2c-b32c-3a7f76367712&quot;,&quot;parentUUID&quot;:&quot;81c25c5e-ba12-461d-9dc9-d5d6b973b052&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should add product to wishlist (PUT /users/wishlist/by-user-and-product-id/:userId/:productId)&quot;,&quot;fullTitle&quot;:&quot;User Routes (with auth) should add product to wishlist (PUT /users/wishlist/by-user-and-product-id/:userId/:productId)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:90,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const dummyProductId = \&quot;dummy-product-id\&quot;;\nconst res = await request(app)\n    .put(`/api/users/wishlist/by-user-and-product-id/${testUserId}/${dummyProductId}`)\n    .set(\&quot;Authorization\&quot;, `Bearer ${idToken}`);\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;732d8015-d591-4137-95a3-8b92aed1daac&quot;,&quot;parentUUID&quot;:&quot;81c25c5e-ba12-461d-9dc9-d5d6b973b052&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get wishlist (GET /users/wishlist/by-user-id/:userId) without auth&quot;,&quot;fullTitle&quot;:&quot;User Routes (with auth) should get wishlist (GET /users/wishlist/by-user-id/:userId) without auth&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:73,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app).get(`/api/users/wishlist/by-user-id/${testUserId}`);\nexpect(res.status).to.equal(200);\nexpect(res.body).to.be.an(\&quot;array\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;25a8f7bf-24e7-461d-8f9f-28f8695f4a7e&quot;,&quot;parentUUID&quot;:&quot;81c25c5e-ba12-461d-9dc9-d5d6b973b052&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should delete user (DELETE /users) with auth&quot;,&quot;fullTitle&quot;:&quot;User Routes (with auth) should delete user (DELETE /users) with auth&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:59,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app)\n    .delete(\&quot;/api/users\&quot;)\n    .set(\&quot;Authorization\&quot;, `Bearer ${idToken}`);\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;de928b85-4171-42b3-95f2-08d390fe8495&quot;,&quot;parentUUID&quot;:&quot;81c25c5e-ba12-461d-9dc9-d5d6b973b052&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not delete user (DELETE /users) without auth&quot;,&quot;fullTitle&quot;:&quot;User Routes (with auth) should not delete user (DELETE /users) without auth&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    const res = await request(app).delete(\&quot;/api/users\&quot;);\n    expect(res.status).to.equal(403);\n}\ncatch (error) {\n    // pass\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a234bbe2-5aa0-4212-b643-a8a856f25638&quot;,&quot;parentUUID&quot;:&quot;81c25c5e-ba12-461d-9dc9-d5d6b973b052&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get recommendations for user&quot;,&quot;fullTitle&quot;:&quot;User Routes (with auth) should get recommendations for user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1337,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const thisTestUserId = \&quot;user_001\&quot;;\nconst adminAuth = admin.auth();\nconst customToken = await adminAuth.createCustomToken(thisTestUserId);\nconst fetch = (await import(\&quot;node-fetch\&quot;)).default;\nconst apiKey = firebaseConfig.apiKey;\nconst response = await fetch(`https://identitytoolkit.googleapis.com/v1/accounts:signInWithCustomToken?key=${apiKey}`, {\n    method: \&quot;POST\&quot;,\n    headers: { \&quot;Content-Type\&quot;: \&quot;application/json\&quot; },\n    body: JSON.stringify({\n        token: customToken,\n        returnSecureToken: true,\n    }),\n});\nconst data = (await response.json());\nconst thisCustomToken = data.idToken;\n// const thisCustomToken =\n// \t\&quot;eyJhbGciOiJSUzI1NiIsImtpZCI6ImE4ZGY2MmQzYTBhNDRlM2RmY2RjYWZjNmRhMTM4Mzc3NDU5ZjliMDEiLCJ0eXAiOiJKV1QifQ.eyJuYW1lIjoiQWxpY2UgSm9obnNvbiIsImlzcyI6Imh0dHBzOi8vc2VjdXJldG9rZW4uZ29vZ2xlLmNvbS9mbGlwcGVyLWFlNmQxIiwiYXVkIjoiZmxpcHBlci1hZTZkMSIsImF1dGhfdGltZSI6MTc1Mjg3NjgyNywidXNlcl9pZCI6InVzZXJfMDAxIiwic3ViIjoidXNlcl8wMDEiLCJpYXQiOjE3NTI4NzY4MjcsImV4cCI6MTc1Mjg4MDQyNywiZW1haWwiOiJhbGljZS5qb2huc29uQGV4YW1wbGUuY29tIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJmaXJlYmFzZSI6eyJpZGVudGl0aWVzIjp7ImVtYWlsIjpbImFsaWNlLmpvaG5zb25AZXhhbXBsZS5jb20iXX0sInNpZ25faW5fcHJvdmlkZXIiOiJwYXNzd29yZCJ9fQ.xpOIqJEsowtlGaT3A1eFAADMsVrphiySw1lUocmOSd_a2EGBNaUBG0Mc1qDbWFBeJU_0LlvSg0U37c8Gg_DA9j8IRSfS62IDFoAtqQuS5zzAC1Z6sBIqxDQKF71xK-mYlLnzcom8S1rY_mX5JWC0wEkIEcpulw3X2WQzXS2tGiJZnEDeYUxtxRQgIth1SukJssd1vqmjttdsZrCf_h_lTpha5BTPVBHmiJNSPUZYm_2Fnq3iMD_YUr4c8Bx4xuHTJT88DjnjyK3du2B2mnx0QRjn8YMVcNBAGhWoAyKrt46TBd7WNFDOdOyldir4NfhrMLLD7WB8ZmUW83NLytwqvw\&quot;;\ntry {\n    const res = await request(app)\n        .get(`/api/recommendations/${thisTestUserId}`)\n        .set(\&quot;Authorization\&quot;, `Bearer ${thisCustomToken}`);\n    expect(res.status).to.equal(200);\n}\ncatch (_err) {\n    throw new Error(\&quot;this shouldn&#x27;t happen :(\&quot;);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;64eca21c-e082-422c-8323-11608a65d98a&quot;,&quot;parentUUID&quot;:&quot;81c25c5e-ba12-461d-9dc9-d5d6b973b052&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d7f5c836-df0b-4fcb-97f0-0c55c47d5df7&quot;,&quot;d3e3b917-4527-423c-b1d4-7a11f7ac9041&quot;,&quot;e304640c-691e-4f30-8c5d-ff6eacc66562&quot;,&quot;79bc1563-9ba0-4c2c-b32c-3a7f76367712&quot;,&quot;732d8015-d591-4137-95a3-8b92aed1daac&quot;,&quot;25a8f7bf-24e7-461d-8f9f-28f8695f4a7e&quot;,&quot;de928b85-4171-42b3-95f2-08d390fe8495&quot;,&quot;a234bbe2-5aa0-4212-b643-a8a856f25638&quot;,&quot;64eca21c-e082-422c-8323-11608a65d98a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1787,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;9c39ffd6-6710-4052-8f07-b25dbd18f30d&quot;,&quot;title&quot;:&quot;Testing product functionality through firebase directly&quot;,&quot;fullFile&quot;:&quot;/app/src/backend/tests/integration/firebase-product.test.ts&quot;,&quot;file&quot;:&quot;/src/backend/tests/integration/firebase-product.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;Testing product functionality through firebase directly\&quot;&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through firebase directly \&quot;before each\&quot; hook in \&quot;Testing product functionality through firebase directly\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:80,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;product = await addProduct(testProduct);\nproductId = product.id;\nproductIds.push(productId);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5c7d71e0-e79b-48c6-b361-e5c56d9056d1&quot;,&quot;parentUUID&quot;:&quot;9c39ffd6-6710-4052-8f07-b25dbd18f30d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;Testing product functionality through firebase directly\&quot;&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through firebase directly \&quot;after each\&quot; hook in \&quot;Testing product functionality through firebase directly\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:37,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await Promise.all(productIds.map((id) =&gt; deleteProduct(id)));\nproductIds.length = 0; // clear the array&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0de0af63-cdda-41dc-a136-7b6cd728b093&quot;,&quot;parentUUID&quot;:&quot;9c39ffd6-6710-4052-8f07-b25dbd18f30d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should add a product&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through firebase directly should add a product&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    expect(productId).to.exist;\n}\ncatch (err) {\n    throw new Error(`Error adding product: ${err.message}`);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3af15b8e-e222-40ed-97b0-d73b03f2582f&quot;,&quot;parentUUID&quot;:&quot;9c39ffd6-6710-4052-8f07-b25dbd18f30d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fetch product by ID&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through firebase directly should fetch product by ID&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:25,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    let fetchedProduct = await getProductById(productId);\n    expect(fetchedProduct).to.exist;\n    expect(fetchedProduct.name).to.equal(testProduct.name);\n}\ncatch (err) {\n    throw new Error(`Error fetching by ID: ${err.message}`);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8e73b681-ebff-4791-98ab-087ae28b11f4&quot;,&quot;parentUUID&quot;:&quot;9c39ffd6-6710-4052-8f07-b25dbd18f30d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fetch all products&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through firebase directly should fetch all products&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:146,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    const product2 = await addProduct(testProduct);\n    const productId2 = product2.id;\n    productIds.push(productId2);\n    const products = await getAllProducts();\n    expect(products).to.be.an(\&quot;array\&quot;);\n    expect(products.length).to.be.gte(2);\n}\ncatch (err) {\n    throw new Error(`Error fetching all products: ${err.message}`);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eaf1d91f-1a50-4657-bfbd-426e718924c6&quot;,&quot;parentUUID&quot;:&quot;9c39ffd6-6710-4052-8f07-b25dbd18f30d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should search products with &#x27;chair&#x27;&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through firebase directly should search products with &#x27;chair&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:54,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    const results = await searchProducts(\&quot;chair\&quot;);\n    expect(results).to.be.an(\&quot;array\&quot;);\n    expect(results.some((p) =&gt; p.name.toLowerCase().includes(\&quot;chair\&quot;))).to.be\n        .true;\n}\ncatch (err) {\n    throw new Error(`Error searching products: ${err.message}`);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2d31557a-75d0-4ef6-8a26-557a7694cd86&quot;,&quot;parentUUID&quot;:&quot;9c39ffd6-6710-4052-8f07-b25dbd18f30d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get products in category &#x27;Accessories&#x27;&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through firebase directly should get products in category &#x27;Accessories&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:55,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    const products = await getProductsInCategory(testCategoryId);\n    expect(products).to.be.an(\&quot;array\&quot;);\n    expect(products.some((p) =&gt; p.categories.includes(testCategoryId))).to.be\n        .true;\n}\ncatch (err) {\n    throw new Error(`Error fetching products in category: ${err.message}`);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d04fa11d-b3cd-4ff4-b075-ee3740c08acb&quot;,&quot;parentUUID&quot;:&quot;9c39ffd6-6710-4052-8f07-b25dbd18f30d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update product price&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through firebase directly should update product price&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:145,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    await updateProduct(productId, { price: 59.99 });\n    const updatedProduct = await getProductById(productId);\n    expect(updatedProduct.price).to.equal(59.99);\n}\ncatch (err) {\n    throw new Error(`Error updating price: ${err.message}`);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;62a5559d-9b3a-4bb0-847b-0e1c7baabfbd&quot;,&quot;parentUUID&quot;:&quot;9c39ffd6-6710-4052-8f07-b25dbd18f30d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update product status&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through firebase directly should update product status&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:134,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    await updateProduct(productId, { status: \&quot;Sold\&quot; });\n    const updatedProduct = await getProductById(productId);\n    expect(updatedProduct.status).to.equal(\&quot;Sold\&quot;);\n}\ncatch (err) {\n    throw new Error(`Error updating status: ${err.message}`);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b24099fa-cc66-45e6-a4e0-ac7f8e1a72db&quot;,&quot;parentUUID&quot;:&quot;9c39ffd6-6710-4052-8f07-b25dbd18f30d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should delete product&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through firebase directly should delete product&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:77,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;expect(productId).to.exist;\nawait deleteProduct(productId);\ntry {\n    await getProductById(productId);\n    throw new Error(\&quot;Product still exists after deletion\&quot;);\n}\ncatch (err) {\n    expect(err.message).to.include(\&quot;Product not found\&quot;);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;54991723-2120-4d48-9244-a8063265d763&quot;,&quot;parentUUID&quot;:&quot;9c39ffd6-6710-4052-8f07-b25dbd18f30d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail to delete the same product again&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through firebase directly should fail to delete the same product again&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:37,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    await deleteProduct(productId);\n    throw new Error(\&quot;Expected deleteProduct to throw, but it succeeded\&quot;);\n}\ncatch (error) {\n    expect(error).to.exist;\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;930015c4-6d71-4785-b654-bceb54b81fad&quot;,&quot;parentUUID&quot;:&quot;9c39ffd6-6710-4052-8f07-b25dbd18f30d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3af15b8e-e222-40ed-97b0-d73b03f2582f&quot;,&quot;8e73b681-ebff-4791-98ab-087ae28b11f4&quot;,&quot;eaf1d91f-1a50-4657-bfbd-426e718924c6&quot;,&quot;2d31557a-75d0-4ef6-8a26-557a7694cd86&quot;,&quot;d04fa11d-b3cd-4ff4-b075-ee3740c08acb&quot;,&quot;62a5559d-9b3a-4bb0-847b-0e1c7baabfbd&quot;,&quot;b24099fa-cc66-45e6-a4e0-ac7f8e1a72db&quot;,&quot;54991723-2120-4d48-9244-a8063265d763&quot;,&quot;930015c4-6d71-4785-b654-bceb54b81fad&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:673,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:10000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;11.7.1&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;7.1.3&quot;},&quot;marge&quot;:{&quot;version&quot;:&quot;6.2.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;reportDir&quot;:&quot;mochawesome-report&quot;,&quot;reportTitle&quot;:&quot;app&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;mochawesome-report/assets&quot;,&quot;jsonFile&quot;:&quot;/app/mochawesome-report/mochawesome.json&quot;,&quot;htmlFile&quot;:&quot;/app/mochawesome-report/mochawesome.html&quot;}"><div id="report"></div><script src="assets/app.js"></script></body></html>