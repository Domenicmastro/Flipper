<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets/app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:3,&quot;tests&quot;:31,&quot;passes&quot;:31,&quot;pending&quot;:0,&quot;failures&quot;:0,&quot;start&quot;:&quot;2025-08-02T02:09:08.433Z&quot;,&quot;end&quot;:&quot;2025-08-02T02:09:19.100Z&quot;,&quot;duration&quot;:10667,&quot;testsRegistered&quot;:31,&quot;passPercent&quot;:100,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false},&quot;results&quot;:[{&quot;uuid&quot;:&quot;88ad31bc-bede-4f72-8323-a5bb53eb5110&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;fullTitle&quot;:&quot;\&quot;before all\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Initialize Firebase Admin SDK (only once)\nif (!getAdminApps().length) {\n    initAdminApp({\n        credential: cert(path.join(__dirname, \&quot;../config/firebase-service-account.json\&quot;)),\n        projectId: \&quot;flipper-ae6d1\&quot;,\n    });\n    console.log(\&quot;âœ… Firebase Admin SDK initialized\&quot;);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8463f237-0eae-4443-b999-ffd948d59c1e&quot;,&quot;parentUUID&quot;:&quot;88ad31bc-bede-4f72-8323-a5bb53eb5110&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;fullTitle&quot;:&quot;\&quot;after all\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Clean up Admin SDK apps\nfor (const app of getAdminApps()) {\n    await deleteApp(app);\n}\nconsole.log(\&quot;ðŸ§¹ Firebase Admin SDK apps deleted\&quot;);\n// Delete Firebase Client SDK apps\nfor (const app of getClientApps()) {\n    await deleteClientApp(app);\n}\nconsole.log(\&quot;ðŸ§¹ Firebase Client SDK apps deleted\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ba5fabef-f918-40af-a799-1e313a32d38e&quot;,&quot;parentUUID&quot;:&quot;88ad31bc-bede-4f72-8323-a5bb53eb5110&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;5988cc11-14bc-4336-bff9-0edf36cc22f0&quot;,&quot;title&quot;:&quot;Testing product functionality through API routes&quot;,&quot;fullFile&quot;:&quot;/app/src/backend/tests/integration/api-products.test.ts&quot;,&quot;file&quot;:&quot;/src/backend/tests/integration/api-products.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;Testing product functionality through API routes\&quot;&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through API routes \&quot;before each\&quot; hook in \&quot;Testing product functionality through API routes\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:91,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;product = await addProduct(testProduct);\nproductId = product.id;\nproductIds.push(productId);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7fa04c5a-fb26-448a-adb7-b955b2786aec&quot;,&quot;parentUUID&quot;:&quot;5988cc11-14bc-4336-bff9-0edf36cc22f0&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;Testing product functionality through API routes\&quot;&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through API routes \&quot;after each\&quot; hook in \&quot;Testing product functionality through API routes\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:60,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await Promise.all(productIds.map((id) =&gt; deleteProduct(id)));\nproductIds.length = 0; // clear the array&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b737c809-d616-41cb-b25c-8197867d226e&quot;,&quot;parentUUID&quot;:&quot;5988cc11-14bc-4336-bff9-0edf36cc22f0&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should add product&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through API routes should add product&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:230,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testProductNew = {\n    name: \&quot;Another Test Chair\&quot;,\n    description: \&quot;A comfy test chair\&quot;,\n    price: 49.99,\n    sellerId: \&quot;user123\&quot;,\n    status: \&quot;For Sale\&quot;,\n    tags: [\&quot;test\&quot;, \&quot;chair\&quot;],\n    categories: [Category.Accessories],\n    images: [\&quot;\&quot;],\n    embedding: [],\n    condition: \&quot;New\&quot;,\n    location: testLocation,\n    attributes: [testAttribute],\n    priceComparisons: [],\n};\nconst res = await request(app)\n    .post(\&quot;/api/products\&quot;)\n    .send({ product: testProductNew })\n    .set(\&quot;Content-Type\&quot;, \&quot;application/json\&quot;)\n    .set(\&quot;Accept\&quot;, \&quot;application/json\&quot;);\nexpect(res.status).to.equal(200);\nconst newProduct = res.body;\nif (newProduct)\n    productIds.push(newProduct.id);\nexpect(newProduct.name).to.equal(\&quot;Another Test Chair\&quot;);\nexpect(newProduct.createdAt).to.exist;\nexpect(newProduct.updatedAt).to.exist;\nexpect(newProduct.id).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1b6653d4-b21c-4532-8102-79b0803fe3ab&quot;,&quot;parentUUID&quot;:&quot;5988cc11-14bc-4336-bff9-0edf36cc22f0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fetch all products&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through API routes should fetch all products&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1352,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app).get(\&quot;/api/products\&quot;);\nexpect(res.status).to.equal(200);\nexpect(res.body).to.be.an(\&quot;array\&quot;);\nexpect(res.body.length).to.be.gte(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7b5d9e4d-05b6-4cb7-98d6-4364e09164a9&quot;,&quot;parentUUID&quot;:&quot;5988cc11-14bc-4336-bff9-0edf36cc22f0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get product by product ID&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through API routes should get product by product ID&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:52,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app).get(`/api/products/by-id/${productId}`);\nexpect(res.status).to.equal(200);\nconst fetchedProduct = res.body;\nexpect(fetchedProduct).to.exist;\nexpect(fetchedProduct.id).to.equal(productId);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b6aa737f-632e-4ef1-b2e3-938b47768a14&quot;,&quot;parentUUID&quot;:&quot;5988cc11-14bc-4336-bff9-0edf36cc22f0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get products by category ID&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through API routes should get products by category ID&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:114,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app).get(`/api/products/by-category/${testCategoryId}`);\nexpect(res.status).to.equal(200);\nexpect(res.body).to.be.an(\&quot;array\&quot;);\nexpect(res.body.length).to.be.gte(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4b5e0f86-0c48-4888-86d0-50ef0e33aa6a&quot;,&quot;parentUUID&quot;:&quot;5988cc11-14bc-4336-bff9-0edf36cc22f0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get products by seller ID&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through API routes should get products by seller ID&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:52,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app).get(`/api/products/by-seller-id/${testProduct.sellerId}`);\nexpect(res.status).to.equal(200);\nexpect(res.body).to.be.an(\&quot;array\&quot;);\nexpect(res.body.length).to.be.gte(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;342b73c2-1daa-4431-8fe9-cacf5cdc8565&quot;,&quot;parentUUID&quot;:&quot;5988cc11-14bc-4336-bff9-0edf36cc22f0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get products by tag&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through API routes should get products by tag&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:55,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const tag = testProduct.tags[0];\nconst res = await request(app).get(`/api/products/by-tag/${tag}`);\nexpect(res.status).to.equal(200);\nexpect(res.body).to.be.an(\&quot;array\&quot;);\nexpect(res.body.length).to.be.gte(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;47677d14-e5ce-4910-94bf-168a01a6cbd8&quot;,&quot;parentUUID&quot;:&quot;5988cc11-14bc-4336-bff9-0edf36cc22f0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should search product by &#x27;chair&#x27;&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through API routes should search product by &#x27;chair&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:64,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app)\n    .get(\&quot;/api/products/search-products\&quot;)\n    .query({ input: \&quot;chair\&quot; });\nexpect(res.status).to.equal(200);\nexpect(res.body).to.be.an(\&quot;array\&quot;);\nconst found = res.body.some((p) =&gt; p.name.toLowerCase().includes(\&quot;chair\&quot;));\nexpect(found).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b3f37fcc-c367-4e22-94d1-e8e34adce4cd&quot;,&quot;parentUUID&quot;:&quot;5988cc11-14bc-4336-bff9-0edf36cc22f0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update price and status&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through API routes should update price and status&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:147,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const updates = { updates: { status: \&quot;Sold\&quot;, price: 3.99 } };\nconst res = await request(app)\n    .patch(`/api/products/by-id/${productId}`)\n    .send(updates)\n    .set(\&quot;Accept\&quot;, \&quot;application/json\&quot;);\nexpect(res.status).to.equal(200);\nconst updatedProduct = res.body;\nexpect(updatedProduct.price).to.equal(3.99);\nexpect(updatedProduct.status).to.equal(\&quot;Sold\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ac1cbe45-3fa5-4b19-a6f0-f62081fac7cb&quot;,&quot;parentUUID&quot;:&quot;5988cc11-14bc-4336-bff9-0edf36cc22f0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should delete product&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through API routes should delete product&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:101,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;console.log(\&quot;product ID (test): \&quot;, productId);\nconst deleteRes = await request(app).delete(`/api/products/by-id/${productId}`);\nexpect(deleteRes.status).to.equal(204);\nconst getRes = await request(app).get(`/api/products/by-id/${productId}`);\nexpect(getRes.status).to.equal(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bb9dcdc2-7e42-4832-ace9-821f889e26d2&quot;,&quot;parentUUID&quot;:&quot;5988cc11-14bc-4336-bff9-0edf36cc22f0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail to delete same product twice&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through API routes should fail to delete same product twice&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:104,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// First delete\nconst deleteRes1 = await request(app).delete(`/api/products/by-id/${productId}`);\nexpect(deleteRes1.status).to.equal(204);\nconst deleteRes2 = await request(app).delete(`/api/products/by-id/${productId}`);\nexpect(deleteRes2.status).to.equal(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7d897d5c-9ed6-4893-a6cf-8481c8a5a998&quot;,&quot;parentUUID&quot;:&quot;5988cc11-14bc-4336-bff9-0edf36cc22f0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should place bid on auctioned item&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through API routes should place bid on auctioned item&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:208,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//\nconst testProductNew = {\n    name: \&quot;Another Test Chair (Auctionable)\&quot;,\n    description: \&quot;A comfy test chair\&quot;,\n    price: 49.99,\n    sellerId: \&quot;user123\&quot;,\n    status: \&quot;For Sale\&quot;,\n    tags: [\&quot;test\&quot;, \&quot;chair\&quot;],\n    categories: [Category.Accessories],\n    images: [\&quot;\&quot;],\n    embedding: [],\n    condition: \&quot;New\&quot;,\n    location: testLocation,\n    attributes: [testAttribute],\n    priceComparisons: [],\n    isAuction: true,\n    startingBid: 49.99,\n    currentBid: 0.0,\n    bidCount: 0,\n};\nconst resAdd = await request(app)\n    .post(\&quot;/api/products\&quot;)\n    .send({ product: testProductNew })\n    .set(\&quot;Content-Type\&quot;, \&quot;application/json\&quot;)\n    .set(\&quot;Accept\&quot;, \&quot;application/json\&quot;);\nexpect(resAdd.status).to.equal(200);\nconst newProduct = resAdd.body;\nif (newProduct)\n    productIds.push(newProduct.id);\nconst resBid = await request(app)\n    .post(`/api/bids/${newProduct.id}/bid`)\n    .send({\n    amount: 50.0,\n    userId: \&quot;user123\&quot;,\n})\n    .set(\&quot;Accept\&quot;, \&quot;application/json\&quot;);\nexpect(resBid.status).to.equal(200);\nconst auctionedProduct = resBid.body;\nif (!auctionedProduct) {\n    throw new Error(\&quot;Auctioned product should exist!\&quot;);\n}\nexpect(auctionedProduct.currentBid).to.equal(50.0);\nexpect(auctionedProduct.bidderId).to.equal(\&quot;user123\&quot;);\nexpect(auctionedProduct.bidCount).to.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;aaeae919-ee61-4443-8b52-d2c92f5a7850&quot;,&quot;parentUUID&quot;:&quot;5988cc11-14bc-4336-bff9-0edf36cc22f0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not be able to bid less than current bid&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through API routes should not be able to bid less than current bid&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:159,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//\nconst testProductNew = {\n    name: \&quot;Another Test Chair (Auctionable)\&quot;,\n    description: \&quot;A comfy test chair\&quot;,\n    price: 49.99,\n    sellerId: \&quot;user123\&quot;,\n    status: \&quot;For Sale\&quot;,\n    tags: [\&quot;test\&quot;, \&quot;chair\&quot;],\n    categories: [Category.Accessories],\n    images: [\&quot;\&quot;],\n    embedding: [],\n    condition: \&quot;New\&quot;,\n    location: testLocation,\n    attributes: [testAttribute],\n    priceComparisons: [],\n    isAuction: true,\n    startingBid: 49.99,\n    currentBid: 60.0,\n    bidCount: 3,\n};\nconst resAdd = await request(app)\n    .post(\&quot;/api/products\&quot;)\n    .send({ product: testProductNew })\n    .set(\&quot;Content-Type\&quot;, \&quot;application/json\&quot;)\n    .set(\&quot;Accept\&quot;, \&quot;application/json\&quot;);\nexpect(resAdd.status).to.equal(200);\nconst newProduct = resAdd.body;\nif (newProduct)\n    productIds.push(newProduct.id);\ntry {\n    const resBid = await request(app)\n        .post(`/api/bids/${newProduct.id}/bid`)\n        .send({\n        amount: 50.0,\n        userId: \&quot;user123\&quot;,\n    })\n        .set(\&quot;Accept\&quot;, \&quot;application/json\&quot;);\n    expect(resBid.status).to.equal(400);\n}\ncatch (error) {\n    // pass!\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fd03b8b7-8114-4e88-8c34-5e3e3aa8ec18&quot;,&quot;parentUUID&quot;:&quot;5988cc11-14bc-4336-bff9-0edf36cc22f0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not be able to bid on non-auctionable product&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through API routes should not be able to bid on non-auctionable product&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:121,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//\nconst testProductNew = {\n    name: \&quot;Another Test Chair (Auctionable)\&quot;,\n    description: \&quot;A comfy test chair\&quot;,\n    price: 49.99,\n    sellerId: \&quot;user123\&quot;,\n    status: \&quot;For Sale\&quot;,\n    tags: [\&quot;test\&quot;, \&quot;chair\&quot;],\n    categories: [Category.Accessories],\n    images: [\&quot;\&quot;],\n    embedding: [],\n    condition: \&quot;New\&quot;,\n    location: testLocation,\n    attributes: [testAttribute],\n    priceComparisons: [],\n    isAuction: false,\n};\nconst resAdd = await request(app)\n    .post(\&quot;/api/products\&quot;)\n    .send({ product: testProductNew })\n    .set(\&quot;Content-Type\&quot;, \&quot;application/json\&quot;)\n    .set(\&quot;Accept\&quot;, \&quot;application/json\&quot;);\nexpect(resAdd.status).to.equal(200);\nconst newProduct = resAdd.body;\nif (newProduct)\n    productIds.push(newProduct.id);\ntry {\n    const resBid = await request(app)\n        .post(`/api/bids/${newProduct.id}/bid`)\n        .send({\n        amount: 50.0,\n        userId: \&quot;user123\&quot;,\n    })\n        .set(\&quot;Accept\&quot;, \&quot;application/json\&quot;);\n    expect(resBid.status).to.equal(400);\n}\ncatch (error) {\n    // pass!\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e5202d42-9069-4636-bbf4-2c834e1f97c6&quot;,&quot;parentUUID&quot;:&quot;5988cc11-14bc-4336-bff9-0edf36cc22f0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1b6653d4-b21c-4532-8102-79b0803fe3ab&quot;,&quot;7b5d9e4d-05b6-4cb7-98d6-4364e09164a9&quot;,&quot;b6aa737f-632e-4ef1-b2e3-938b47768a14&quot;,&quot;4b5e0f86-0c48-4888-86d0-50ef0e33aa6a&quot;,&quot;342b73c2-1daa-4431-8fe9-cacf5cdc8565&quot;,&quot;47677d14-e5ce-4910-94bf-168a01a6cbd8&quot;,&quot;b3f37fcc-c367-4e22-94d1-e8e34adce4cd&quot;,&quot;ac1cbe45-3fa5-4b19-a6f0-f62081fac7cb&quot;,&quot;bb9dcdc2-7e42-4832-ace9-821f889e26d2&quot;,&quot;7d897d5c-9ed6-4893-a6cf-8481c8a5a998&quot;,&quot;aaeae919-ee61-4443-8b52-d2c92f5a7850&quot;,&quot;fd03b8b7-8114-4e88-8c34-5e3e3aa8ec18&quot;,&quot;e5202d42-9069-4636-bbf4-2c834e1f97c6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2759,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;ba5bd0aa-f2c7-4f4f-a999-49e5e6dd2d67&quot;,&quot;title&quot;:&quot;User Routes (with auth)&quot;,&quot;fullFile&quot;:&quot;/app/src/backend/tests/integration/api-user.test.ts&quot;,&quot;file&quot;:&quot;/src/backend/tests/integration/api-user.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;User Routes (with auth)\&quot;&quot;,&quot;fullTitle&quot;:&quot;User Routes (with auth) \&quot;before all\&quot; hook in \&quot;User Routes (with auth)\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1083,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(10000);\nif (!getAdminApps().length) {\n    // Only initialize if not initialized yet, with projectId here if you want\n    initAdminApp({\n        credential: cert(path.join(__dirname, \&quot;../config/firebase-service-account.json\&quot;)),\n        projectId: \&quot;flipper-ae6d1\&quot;,\n    });\n}\nconst adminAuth = admin.auth();\nconst userRecord = await adminAuth.createUser({\n    email: testUser.email,\n    password: \&quot;testpassword\&quot;,\n    displayName: testUser.name,\n});\ntestUserId = userRecord.uid;\ntestUser.id = testUserId;\nconst customToken = await adminAuth.createCustomToken(testUserId);\nconst fetch = (await import(\&quot;node-fetch\&quot;)).default;\nconst apiKey = firebaseConfig.apiKey;\nconst response = await fetch(`https://identitytoolkit.googleapis.com/v1/accounts:signInWithCustomToken?key=${apiKey}`, {\n    method: \&quot;POST\&quot;,\n    headers: { \&quot;Content-Type\&quot;: \&quot;application/json\&quot; },\n    body: JSON.stringify({ token: customToken, returnSecureToken: true }),\n});\nconst data = (await response.json());\nidToken = data.idToken;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0f28839e-d5b2-4c70-be73-7846872a6187&quot;,&quot;parentUUID&quot;:&quot;ba5bd0aa-f2c7-4f4f-a999-49e5e6dd2d67&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;User Routes (with auth)\&quot;&quot;,&quot;fullTitle&quot;:&quot;User Routes (with auth) \&quot;after all\&quot; hook in \&quot;User Routes (with auth)\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:541,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;if (createdUserId)\n    await admin.auth().deleteUser(createdUserId).catch(console.error);\nif (testUserId)\n    await admin.auth().deleteUser(testUserId).catch(console.error);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;41daf215-e80c-4f20-98c0-72f3c63b4745&quot;,&quot;parentUUID&quot;:&quot;ba5bd0aa-f2c7-4f4f-a999-49e5e6dd2d67&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a user (POST /users) with auth&quot;,&quot;fullTitle&quot;:&quot;User Routes (with auth) should create a user (POST /users) with auth&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:124,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app)\n    .post(\&quot;/api/users\&quot;)\n    .set(\&quot;Authorization\&quot;, `Bearer ${idToken}`)\n    .send({ user: testUser });\nexpect(res.status).to.equal(200);\nexpect(res.body).to.have.property(\&quot;id\&quot;, testUserId);\ncreatedUserId = res.body.id;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;81ce8dd4-28f3-432e-a4e7-64121ff0abc7&quot;,&quot;parentUUID&quot;:&quot;ba5bd0aa-f2c7-4f4f-a999-49e5e6dd2d67&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get user by id (PUT /users/get-or-create/:userId) without auth&quot;,&quot;fullTitle&quot;:&quot;User Routes (with auth) should get user by id (PUT /users/get-or-create/:userId) without auth&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:38,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app).put(`/api/users/get-or-create/${testUserId}`);\nexpect(res.status).to.equal(200);\nexpect(res.body).to.have.property(\&quot;id\&quot;, testUserId);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;50d9384a-7692-4733-9577-0b9b51b491f1&quot;,&quot;parentUUID&quot;:&quot;ba5bd0aa-f2c7-4f4f-a999-49e5e6dd2d67&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update user info (PATCH /users/by-id/:userId) with auth&quot;,&quot;fullTitle&quot;:&quot;User Routes (with auth) should update user info (PATCH /users/by-id/:userId) with auth&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:44,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const updates = { bio: \&quot;Updated bio\&quot; };\nconst res = await request(app)\n    .patch(`/api/users/by-id/${testUserId}`)\n    .set(\&quot;Authorization\&quot;, `Bearer ${idToken}`)\n    .send({ updates });\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;66b5ba7d-45ba-4e84-8aba-ad559c2da4ef&quot;,&quot;parentUUID&quot;:&quot;ba5bd0aa-f2c7-4f4f-a999-49e5e6dd2d67&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should NOT update user info with invalid auth&quot;,&quot;fullTitle&quot;:&quot;User Routes (with auth) should NOT update user info with invalid auth&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const updates = { bio: \&quot;Fail update\&quot; };\nconst res = await request(app)\n    .patch(`/api/users/by-id/${testUserId}`)\n    .set(\&quot;Authorization\&quot;, `Bearer invalidtoken`)\n    .send({ updates });\nexpect(res.status).to.equal(401);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;13a3d200-b699-47ba-99a9-36e0404720f5&quot;,&quot;parentUUID&quot;:&quot;ba5bd0aa-f2c7-4f4f-a999-49e5e6dd2d67&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should add product to wishlist (PUT /users/wishlist/by-user-and-product-id/:userId/:productId)&quot;,&quot;fullTitle&quot;:&quot;User Routes (with auth) should add product to wishlist (PUT /users/wishlist/by-user-and-product-id/:userId/:productId)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:83,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const dummyProductId = \&quot;dummy-product-id\&quot;;\nconst res = await request(app)\n    .put(`/api/users/wishlist/by-user-and-product-id/${testUserId}/${dummyProductId}`)\n    .set(\&quot;Authorization\&quot;, `Bearer ${idToken}`);\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;49e71a66-aaf1-4409-9c05-4f95984884ae&quot;,&quot;parentUUID&quot;:&quot;ba5bd0aa-f2c7-4f4f-a999-49e5e6dd2d67&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get wishlist (GET /users/wishlist/by-user-id/:userId) without auth&quot;,&quot;fullTitle&quot;:&quot;User Routes (with auth) should get wishlist (GET /users/wishlist/by-user-id/:userId) without auth&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:65,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app).get(`/api/users/wishlist/by-user-id/${testUserId}`);\nexpect(res.status).to.equal(200);\nexpect(res.body).to.be.an(\&quot;array\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;87fa871e-4b38-4459-b96c-2b49d843fee6&quot;,&quot;parentUUID&quot;:&quot;ba5bd0aa-f2c7-4f4f-a999-49e5e6dd2d67&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should delete user (DELETE /users) with auth&quot;,&quot;fullTitle&quot;:&quot;User Routes (with auth) should delete user (DELETE /users) with auth&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:32,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app)\n    .delete(\&quot;/api/users\&quot;)\n    .set(\&quot;Authorization\&quot;, `Bearer ${idToken}`);\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fd537b4b-dbba-4bd0-9c2a-c1fb56104393&quot;,&quot;parentUUID&quot;:&quot;ba5bd0aa-f2c7-4f4f-a999-49e5e6dd2d67&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not delete user (DELETE /users) without auth&quot;,&quot;fullTitle&quot;:&quot;User Routes (with auth) should not delete user (DELETE /users) without auth&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    const res = await request(app).delete(\&quot;/api/users\&quot;);\n    expect(res.status).to.equal(403);\n}\ncatch (error) {\n    // pass\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bf8e6e87-f350-42aa-ab02-7cad56f76756&quot;,&quot;parentUUID&quot;:&quot;ba5bd0aa-f2c7-4f4f-a999-49e5e6dd2d67&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get recommendations for user&quot;,&quot;fullTitle&quot;:&quot;User Routes (with auth) should get recommendations for user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1144,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const thisTestUserId = \&quot;user_001\&quot;;\nconst adminAuth = admin.auth();\nconst customToken = await adminAuth.createCustomToken(thisTestUserId);\nconst fetch = (await import(\&quot;node-fetch\&quot;)).default;\nconst apiKey = firebaseConfig.apiKey;\nconst response = await fetch(`https://identitytoolkit.googleapis.com/v1/accounts:signInWithCustomToken?key=${apiKey}`, {\n    method: \&quot;POST\&quot;,\n    headers: { \&quot;Content-Type\&quot;: \&quot;application/json\&quot; },\n    body: JSON.stringify({\n        token: customToken,\n        returnSecureToken: true,\n    }),\n});\nconst data = (await response.json());\nconst thisCustomToken = data.idToken;\n// const thisCustomToken =\n// \t\&quot;eyJhbGciOiJSUzI1NiIsImtpZCI6ImE4ZGY2MmQzYTBhNDRlM2RmY2RjYWZjNmRhMTM4Mzc3NDU5ZjliMDEiLCJ0eXAiOiJKV1QifQ.eyJuYW1lIjoiQWxpY2UgSm9obnNvbiIsImlzcyI6Imh0dHBzOi8vc2VjdXJldG9rZW4uZ29vZ2xlLmNvbS9mbGlwcGVyLWFlNmQxIiwiYXVkIjoiZmxpcHBlci1hZTZkMSIsImF1dGhfdGltZSI6MTc1Mjg3NjgyNywidXNlcl9pZCI6InVzZXJfMDAxIiwic3ViIjoidXNlcl8wMDEiLCJpYXQiOjE3NTI4NzY4MjcsImV4cCI6MTc1Mjg4MDQyNywiZW1haWwiOiJhbGljZS5qb2huc29uQGV4YW1wbGUuY29tIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJmaXJlYmFzZSI6eyJpZGVudGl0aWVzIjp7ImVtYWlsIjpbImFsaWNlLmpvaG5zb25AZXhhbXBsZS5jb20iXX0sInNpZ25faW5fcHJvdmlkZXIiOiJwYXNzd29yZCJ9fQ.xpOIqJEsowtlGaT3A1eFAADMsVrphiySw1lUocmOSd_a2EGBNaUBG0Mc1qDbWFBeJU_0LlvSg0U37c8Gg_DA9j8IRSfS62IDFoAtqQuS5zzAC1Z6sBIqxDQKF71xK-mYlLnzcom8S1rY_mX5JWC0wEkIEcpulw3X2WQzXS2tGiJZnEDeYUxtxRQgIth1SukJssd1vqmjttdsZrCf_h_lTpha5BTPVBHmiJNSPUZYm_2Fnq3iMD_YUr4c8Bx4xuHTJT88DjnjyK3du2B2mnx0QRjn8YMVcNBAGhWoAyKrt46TBd7WNFDOdOyldir4NfhrMLLD7WB8ZmUW83NLytwqvw\&quot;;\ntry {\n    const res = await request(app)\n        .get(`/api/recommendations/${thisTestUserId}`)\n        .set(\&quot;Authorization\&quot;, `Bearer ${thisCustomToken}`);\n    expect(res.status).to.equal(200);\n}\ncatch (_err) {\n    throw new Error(\&quot;this shouldn&#x27;t happen :(\&quot;);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;53bffe1b-fd34-4efa-847d-5f96a86a46cf&quot;,&quot;parentUUID&quot;:&quot;ba5bd0aa-f2c7-4f4f-a999-49e5e6dd2d67&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;81ce8dd4-28f3-432e-a4e7-64121ff0abc7&quot;,&quot;50d9384a-7692-4733-9577-0b9b51b491f1&quot;,&quot;66b5ba7d-45ba-4e84-8aba-ad559c2da4ef&quot;,&quot;13a3d200-b699-47ba-99a9-36e0404720f5&quot;,&quot;49e71a66-aaf1-4409-9c05-4f95984884ae&quot;,&quot;87fa871e-4b38-4459-b96c-2b49d843fee6&quot;,&quot;fd537b4b-dbba-4bd0-9c2a-c1fb56104393&quot;,&quot;bf8e6e87-f350-42aa-ab02-7cad56f76756&quot;,&quot;53bffe1b-fd34-4efa-847d-5f96a86a46cf&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1538,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;c4bbdf11-bfe2-426e-b676-98eee6a7f7be&quot;,&quot;title&quot;:&quot;Testing product functionality through firebase directly&quot;,&quot;fullFile&quot;:&quot;/app/src/backend/tests/integration/firebase-product.test.ts&quot;,&quot;file&quot;:&quot;/src/backend/tests/integration/firebase-product.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;Testing product functionality through firebase directly\&quot;&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through firebase directly \&quot;before each\&quot; hook in \&quot;Testing product functionality through firebase directly\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:62,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;product = await addProduct(testProduct);\nproductId = product.id;\nproductIds.push(productId);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e013f15a-e4cc-429d-aa36-2fd04844e810&quot;,&quot;parentUUID&quot;:&quot;c4bbdf11-bfe2-426e-b676-98eee6a7f7be&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;Testing product functionality through firebase directly\&quot;&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through firebase directly \&quot;after each\&quot; hook in \&quot;Testing product functionality through firebase directly\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:32,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await Promise.all(productIds.map((id) =&gt; deleteProduct(id)));\nproductIds.length = 0; // clear the array&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cec6803a-f78f-4b3d-8618-22d4eb254ae9&quot;,&quot;parentUUID&quot;:&quot;c4bbdf11-bfe2-426e-b676-98eee6a7f7be&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should add a product&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through firebase directly should add a product&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    expect(productId).to.exist;\n}\ncatch (err) {\n    throw new Error(`Error adding product: ${err.message}`);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2b6c1204-ce74-425d-a58c-bfef35273307&quot;,&quot;parentUUID&quot;:&quot;c4bbdf11-bfe2-426e-b676-98eee6a7f7be&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fetch product by ID&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through firebase directly should fetch product by ID&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:29,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    let fetchedProduct = await getProductById(productId);\n    expect(fetchedProduct).to.exist;\n    expect(fetchedProduct.name).to.equal(testProduct.name);\n}\ncatch (err) {\n    throw new Error(`Error fetching by ID: ${err.message}`);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;457d5bc6-b9fb-4965-8e15-5cb1c9c888e4&quot;,&quot;parentUUID&quot;:&quot;c4bbdf11-bfe2-426e-b676-98eee6a7f7be&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fetch all products&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through firebase directly should fetch all products&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:129,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    const product2 = await addProduct(testProduct);\n    const productId2 = product2.id;\n    productIds.push(productId2);\n    const products = await getAllProducts();\n    expect(products).to.be.an(\&quot;array\&quot;);\n    expect(products.length).to.be.gte(2);\n}\ncatch (err) {\n    throw new Error(`Error fetching all products: ${err.message}`);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8df66665-597a-4447-8823-81e620108d36&quot;,&quot;parentUUID&quot;:&quot;c4bbdf11-bfe2-426e-b676-98eee6a7f7be&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should search products with &#x27;chair&#x27;&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through firebase directly should search products with &#x27;chair&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:48,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    const results = await searchProducts(\&quot;chair\&quot;);\n    expect(results).to.be.an(\&quot;array\&quot;);\n    expect(results.some((p) =&gt; p.name.toLowerCase().includes(\&quot;chair\&quot;))).to.be\n        .true;\n}\ncatch (err) {\n    throw new Error(`Error searching products: ${err.message}`);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c6b7cd42-4369-47f2-9b3e-73aa1421466c&quot;,&quot;parentUUID&quot;:&quot;c4bbdf11-bfe2-426e-b676-98eee6a7f7be&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get products in category &#x27;Accessories&#x27;&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through firebase directly should get products in category &#x27;Accessories&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:56,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    const products = await getProductsInCategory(testCategoryId);\n    expect(products).to.be.an(\&quot;array\&quot;);\n    expect(products.some((p) =&gt; p.categories.includes(testCategoryId))).to.be\n        .true;\n}\ncatch (err) {\n    throw new Error(`Error fetching products in category: ${err.message}`);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d88d79c0-3add-4310-bdf3-108259d854e5&quot;,&quot;parentUUID&quot;:&quot;c4bbdf11-bfe2-426e-b676-98eee6a7f7be&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update product price&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through firebase directly should update product price&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:98,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    await updateProduct(productId, { price: 59.99 });\n    const updatedProduct = await getProductById(productId);\n    expect(updatedProduct.price).to.equal(59.99);\n}\ncatch (err) {\n    throw new Error(`Error updating price: ${err.message}`);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fc384734-d769-4e58-a936-1754e95fcbc8&quot;,&quot;parentUUID&quot;:&quot;c4bbdf11-bfe2-426e-b676-98eee6a7f7be&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update product status&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through firebase directly should update product status&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:113,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    await updateProduct(productId, { status: \&quot;Sold\&quot; });\n    const updatedProduct = await getProductById(productId);\n    expect(updatedProduct.status).to.equal(\&quot;Sold\&quot;);\n}\ncatch (err) {\n    throw new Error(`Error updating status: ${err.message}`);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;183c63b9-2c80-4ecf-9961-5bc93d2aaf43&quot;,&quot;parentUUID&quot;:&quot;c4bbdf11-bfe2-426e-b676-98eee6a7f7be&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should delete product&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through firebase directly should delete product&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:68,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;expect(productId).to.exist;\nawait deleteProduct(productId);\ntry {\n    await getProductById(productId);\n    throw new Error(\&quot;Product still exists after deletion\&quot;);\n}\ncatch (err) {\n    expect(err.message).to.include(\&quot;Product not found\&quot;);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b65e8ea3-aa66-4ed1-aff1-423250641763&quot;,&quot;parentUUID&quot;:&quot;c4bbdf11-bfe2-426e-b676-98eee6a7f7be&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail to delete the same product again&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through firebase directly should fail to delete the same product again&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:35,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    await deleteProduct(productId);\n    throw new Error(\&quot;Expected deleteProduct to throw, but it succeeded\&quot;);\n}\ncatch (error) {\n    expect(error).to.exist;\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f3fd5c93-8f0b-44c7-9b2b-22686fd5acff&quot;,&quot;parentUUID&quot;:&quot;c4bbdf11-bfe2-426e-b676-98eee6a7f7be&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2b6c1204-ce74-425d-a58c-bfef35273307&quot;,&quot;457d5bc6-b9fb-4965-8e15-5cb1c9c888e4&quot;,&quot;8df66665-597a-4447-8823-81e620108d36&quot;,&quot;c6b7cd42-4369-47f2-9b3e-73aa1421466c&quot;,&quot;d88d79c0-3add-4310-bdf3-108259d854e5&quot;,&quot;fc384734-d769-4e58-a936-1754e95fcbc8&quot;,&quot;183c63b9-2c80-4ecf-9961-5bc93d2aaf43&quot;,&quot;b65e8ea3-aa66-4ed1-aff1-423250641763&quot;,&quot;f3fd5c93-8f0b-44c7-9b2b-22686fd5acff&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:576,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:10000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;11.7.1&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;7.1.3&quot;},&quot;marge&quot;:{&quot;version&quot;:&quot;6.2.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;reportDir&quot;:&quot;mochawesome-report&quot;,&quot;reportTitle&quot;:&quot;app&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;mochawesome-report/assets&quot;,&quot;jsonFile&quot;:&quot;/app/mochawesome-report/mochawesome.json&quot;,&quot;htmlFile&quot;:&quot;/app/mochawesome-report/mochawesome.html&quot;}"><div id="report"></div><script src="assets/app.js"></script></body></html>