<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets/app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:3,&quot;tests&quot;:31,&quot;passes&quot;:31,&quot;pending&quot;:0,&quot;failures&quot;:0,&quot;start&quot;:&quot;2025-07-19T04:59:01.812Z&quot;,&quot;end&quot;:&quot;2025-07-19T04:59:08.789Z&quot;,&quot;duration&quot;:6977,&quot;testsRegistered&quot;:31,&quot;passPercent&quot;:100,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false},&quot;results&quot;:[{&quot;uuid&quot;:&quot;f95be56c-ee16-4f9d-b7b7-e7a0aa6ef8e4&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;fullTitle&quot;:&quot;\&quot;before all\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Initialize Firebase Admin SDK (only once)\nif (!getAdminApps().length) {\n\tinitAdminApp({\n\t\tcredential: cert(\n\t\t\tpath.join(__dirname, \&quot;../config/firebase-service-account.json\&quot;)\n\t\t),\n\t\tprojectId: \&quot;flipper-ae6d1\&quot;,\n\t});\n\tconsole.log(\&quot;âœ… Firebase Admin SDK initialized\&quot;);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;056938d0-6755-418b-a3dc-e3f7247adfc1&quot;,&quot;parentUUID&quot;:&quot;f95be56c-ee16-4f9d-b7b7-e7a0aa6ef8e4&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;fullTitle&quot;:&quot;\&quot;after all\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Clean up Admin SDK apps\nfor (const app of getAdminApps()) {\n\tawait deleteApp(app);\n}\nconsole.log(\&quot;ðŸ§¹ Firebase Admin SDK apps deleted\&quot;);\n// Delete Firebase Client SDK apps\nfor (const app of getClientApps()) {\n\tawait deleteClientApp(app);\n}\nconsole.log(\&quot;ðŸ§¹ Firebase Client SDK apps deleted\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4e4a3b11-d85c-4dcb-876f-c165566a7eb3&quot;,&quot;parentUUID&quot;:&quot;f95be56c-ee16-4f9d-b7b7-e7a0aa6ef8e4&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;36ce3071-784e-4d7a-a1ce-1c1f70d1f73e&quot;,&quot;title&quot;:&quot;Testing product functionality through API routes&quot;,&quot;fullFile&quot;:&quot;/Users/janieholzmann/Documents/cpsc-455-group/src/backend/tests/integration/api-products.test.ts&quot;,&quot;file&quot;:&quot;/src/backend/tests/integration/api-products.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;Testing product functionality through API routes\&quot;&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through API routes \&quot;before each\&quot; hook in \&quot;Testing product functionality through API routes\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:60,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;product = await addProduct(testProduct);\nproductId = product.id;\nproductIds.push(productId);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fea7ff8a-0963-4c89-95c6-5d1c410ef29c&quot;,&quot;parentUUID&quot;:&quot;36ce3071-784e-4d7a-a1ce-1c1f70d1f73e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;Testing product functionality through API routes\&quot;&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through API routes \&quot;after each\&quot; hook in \&quot;Testing product functionality through API routes\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:44,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await Promise.all(productIds.map((id) =&gt; deleteProduct(id)));\nproductIds.length = 0; // clear the array&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;930ee42c-398a-4d1a-8cd3-7a98e188151a&quot;,&quot;parentUUID&quot;:&quot;36ce3071-784e-4d7a-a1ce-1c1f70d1f73e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should add product&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through API routes should add product&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:133,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testProductNew = {\n    name: \&quot;Another Test Chair\&quot;,\n    description: \&quot;A comfy test chair\&quot;,\n    price: 49.99,\n    sellerId: \&quot;user123\&quot;,\n    status: \&quot;For Sale\&quot;,\n    tags: [\&quot;test\&quot;, \&quot;chair\&quot;],\n    categories: [Category.Accessories],\n    images: [\&quot;\&quot;],\n    embedding: [],\n    condition: \&quot;New\&quot;,\n    location: testLocation,\n    attributes: [testAttribute],\n    priceComparisons: [],\n};\nconst res = await request(app)\n    .post(\&quot;/api/products\&quot;)\n    .send({ product: testProductNew })\n    .set(\&quot;Content-Type\&quot;, \&quot;application/json\&quot;)\n    .set(\&quot;Accept\&quot;, \&quot;application/json\&quot;);\nexpect(res.status).to.equal(200);\nconst newProduct = res.body;\nif (newProduct)\n    productIds.push(newProduct.id);\nexpect(newProduct.name).to.equal(\&quot;Another Test Chair\&quot;);\nexpect(newProduct.createdAt).to.exist;\nexpect(newProduct.updatedAt).to.exist;\nexpect(newProduct.id).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b84f8dfb-20d7-4e3c-8136-e348941b9fbc&quot;,&quot;parentUUID&quot;:&quot;36ce3071-784e-4d7a-a1ce-1c1f70d1f73e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fetch all products&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through API routes should fetch all products&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:160,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app).get(\&quot;/api/products\&quot;);\nexpect(res.status).to.equal(200);\nexpect(res.body).to.be.an(\&quot;array\&quot;);\nexpect(res.body.length).to.be.gte(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5a8de533-81f5-456c-9668-97ebac9c2aac&quot;,&quot;parentUUID&quot;:&quot;36ce3071-784e-4d7a-a1ce-1c1f70d1f73e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get product by product ID&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through API routes should get product by product ID&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:23,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app).get(`/api/products/by-id/${productId}`);\nexpect(res.status).to.equal(200);\nconst fetchedProduct = res.body;\nexpect(fetchedProduct).to.exist;\nexpect(fetchedProduct.id).to.equal(productId);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b6acfcf6-df4c-4659-8564-1835885fecd9&quot;,&quot;parentUUID&quot;:&quot;36ce3071-784e-4d7a-a1ce-1c1f70d1f73e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get products by category ID&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through API routes should get products by category ID&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:52,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app).get(`/api/products/by-category/${testCategoryId}`);\nexpect(res.status).to.equal(200);\nexpect(res.body).to.be.an(\&quot;array\&quot;);\nexpect(res.body.length).to.be.gte(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ff2eef45-b88c-46d6-9c87-9e087850fef8&quot;,&quot;parentUUID&quot;:&quot;36ce3071-784e-4d7a-a1ce-1c1f70d1f73e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get products by seller ID&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through API routes should get products by seller ID&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:66,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app).get(`/api/products/by-seller-id/${testProduct.sellerId}`);\nexpect(res.status).to.equal(200);\nexpect(res.body).to.be.an(\&quot;array\&quot;);\nexpect(res.body.length).to.be.gte(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9823591e-de86-4c99-b760-e212743123b4&quot;,&quot;parentUUID&quot;:&quot;36ce3071-784e-4d7a-a1ce-1c1f70d1f73e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get products by tag&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through API routes should get products by tag&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:35,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const tag = testProduct.tags[0];\nconst res = await request(app).get(`/api/products/by-tag/${tag}`);\nexpect(res.status).to.equal(200);\nexpect(res.body).to.be.an(\&quot;array\&quot;);\nexpect(res.body.length).to.be.gte(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a60fed87-3a43-4fdd-baee-c75b7f072eff&quot;,&quot;parentUUID&quot;:&quot;36ce3071-784e-4d7a-a1ce-1c1f70d1f73e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should search product by &#x27;chair&#x27;&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through API routes should search product by &#x27;chair&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:45,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app)\n    .get(\&quot;/api/products/search-products\&quot;)\n    .query({ input: \&quot;chair\&quot; });\nexpect(res.status).to.equal(200);\nexpect(res.body).to.be.an(\&quot;array\&quot;);\nconst found = res.body.some((p) =&gt; p.name.toLowerCase().includes(\&quot;chair\&quot;));\nexpect(found).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6fe232f7-ab1e-4619-ac5b-1a1fb232957d&quot;,&quot;parentUUID&quot;:&quot;36ce3071-784e-4d7a-a1ce-1c1f70d1f73e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update price and status&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through API routes should update price and status&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:122,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const updates = { updates: { status: \&quot;Sold\&quot;, price: 3.99 } };\nconst res = await request(app)\n    .patch(`/api/products/by-id/${productId}`)\n    .send(updates)\n    .set(\&quot;Accept\&quot;, \&quot;application/json\&quot;);\nexpect(res.status).to.equal(200);\nconst updatedProduct = res.body;\nexpect(updatedProduct.price).to.equal(3.99);\nexpect(updatedProduct.status).to.equal(\&quot;Sold\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;54e8beab-8b0f-4bd8-b195-f3149ed7d016&quot;,&quot;parentUUID&quot;:&quot;36ce3071-784e-4d7a-a1ce-1c1f70d1f73e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should delete product&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through API routes should delete product&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:89,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;console.log(\&quot;product ID (test): \&quot;, productId);\nconst deleteRes = await request(app).delete(`/api/products/by-id/${productId}`);\nexpect(deleteRes.status).to.equal(204);\nconst getRes = await request(app).get(`/api/products/by-id/${productId}`);\nexpect(getRes.status).to.equal(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f7bd2ab8-be3d-4327-893b-c9aeaee4f347&quot;,&quot;parentUUID&quot;:&quot;36ce3071-784e-4d7a-a1ce-1c1f70d1f73e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail to delete same product twice&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through API routes should fail to delete same product twice&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:92,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// First delete\nconst deleteRes1 = await request(app).delete(`/api/products/by-id/${productId}`);\nexpect(deleteRes1.status).to.equal(204);\nconst deleteRes2 = await request(app).delete(`/api/products/by-id/${productId}`);\nexpect(deleteRes2.status).to.equal(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f981a493-b64c-4460-b1ed-22851a775938&quot;,&quot;parentUUID&quot;:&quot;36ce3071-784e-4d7a-a1ce-1c1f70d1f73e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should place bid on auctioned item&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through API routes should place bid on auctioned item&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:168,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//\nconst testProductNew = {\n    name: \&quot;Another Test Chair (Auctionable)\&quot;,\n    description: \&quot;A comfy test chair\&quot;,\n    price: 49.99,\n    sellerId: \&quot;user123\&quot;,\n    status: \&quot;For Sale\&quot;,\n    tags: [\&quot;test\&quot;, \&quot;chair\&quot;],\n    categories: [Category.Accessories],\n    images: [\&quot;\&quot;],\n    embedding: [],\n    condition: \&quot;New\&quot;,\n    location: testLocation,\n    attributes: [testAttribute],\n    priceComparisons: [],\n    isAuction: true,\n    startingBid: 49.99,\n    currentBid: 0.0,\n    bidCount: 0,\n};\nconst resAdd = await request(app)\n    .post(\&quot;/api/products\&quot;)\n    .send({ product: testProductNew })\n    .set(\&quot;Content-Type\&quot;, \&quot;application/json\&quot;)\n    .set(\&quot;Accept\&quot;, \&quot;application/json\&quot;);\nexpect(resAdd.status).to.equal(200);\nconst newProduct = resAdd.body;\nif (newProduct)\n    productIds.push(newProduct.id);\nconst resBid = await request(app)\n    .post(`/api/bids/${newProduct.id}/bid`)\n    .send({\n    amount: 50.0,\n    userId: \&quot;user123\&quot;,\n})\n    .set(\&quot;Accept\&quot;, \&quot;application/json\&quot;);\nexpect(resBid.status).to.equal(200);\nconst auctionedProduct = resBid.body;\nif (!auctionedProduct) {\n    throw new Error(\&quot;Auctioned product should exist!\&quot;);\n}\nexpect(auctionedProduct.currentBid).to.equal(50.0);\nexpect(auctionedProduct.bidderId).to.equal(\&quot;user123\&quot;);\nexpect(auctionedProduct.bidCount).to.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7fc4cc0d-581f-4abe-a784-4178be71f944&quot;,&quot;parentUUID&quot;:&quot;36ce3071-784e-4d7a-a1ce-1c1f70d1f73e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not be able to bid less than current bid&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through API routes should not be able to bid less than current bid&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:90,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//\nconst testProductNew = {\n    name: \&quot;Another Test Chair (Auctionable)\&quot;,\n    description: \&quot;A comfy test chair\&quot;,\n    price: 49.99,\n    sellerId: \&quot;user123\&quot;,\n    status: \&quot;For Sale\&quot;,\n    tags: [\&quot;test\&quot;, \&quot;chair\&quot;],\n    categories: [Category.Accessories],\n    images: [\&quot;\&quot;],\n    embedding: [],\n    condition: \&quot;New\&quot;,\n    location: testLocation,\n    attributes: [testAttribute],\n    priceComparisons: [],\n    isAuction: true,\n    startingBid: 49.99,\n    currentBid: 60.0,\n    bidCount: 3,\n};\nconst resAdd = await request(app)\n    .post(\&quot;/api/products\&quot;)\n    .send({ product: testProductNew })\n    .set(\&quot;Content-Type\&quot;, \&quot;application/json\&quot;)\n    .set(\&quot;Accept\&quot;, \&quot;application/json\&quot;);\nexpect(resAdd.status).to.equal(200);\nconst newProduct = resAdd.body;\nif (newProduct)\n    productIds.push(newProduct.id);\ntry {\n    const resBid = await request(app)\n        .post(`/api/bids/${newProduct.id}/bid`)\n        .send({\n        amount: 50.0,\n        userId: \&quot;user123\&quot;,\n    })\n        .set(\&quot;Accept\&quot;, \&quot;application/json\&quot;);\n    expect(resBid.status).to.equal(400);\n}\ncatch (error) {\n    // pass!\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e1168e07-572d-47aa-81b6-c195de7a5ec2&quot;,&quot;parentUUID&quot;:&quot;36ce3071-784e-4d7a-a1ce-1c1f70d1f73e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not be able to bid on non-auctionable product&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through API routes should not be able to bid on non-auctionable product&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:96,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//\nconst testProductNew = {\n    name: \&quot;Another Test Chair (Auctionable)\&quot;,\n    description: \&quot;A comfy test chair\&quot;,\n    price: 49.99,\n    sellerId: \&quot;user123\&quot;,\n    status: \&quot;For Sale\&quot;,\n    tags: [\&quot;test\&quot;, \&quot;chair\&quot;],\n    categories: [Category.Accessories],\n    images: [\&quot;\&quot;],\n    embedding: [],\n    condition: \&quot;New\&quot;,\n    location: testLocation,\n    attributes: [testAttribute],\n    priceComparisons: [],\n    isAuction: false,\n};\nconst resAdd = await request(app)\n    .post(\&quot;/api/products\&quot;)\n    .send({ product: testProductNew })\n    .set(\&quot;Content-Type\&quot;, \&quot;application/json\&quot;)\n    .set(\&quot;Accept\&quot;, \&quot;application/json\&quot;);\nexpect(resAdd.status).to.equal(200);\nconst newProduct = resAdd.body;\nif (newProduct)\n    productIds.push(newProduct.id);\ntry {\n    const resBid = await request(app)\n        .post(`/api/bids/${newProduct.id}/bid`)\n        .send({\n        amount: 50.0,\n        userId: \&quot;user123\&quot;,\n    })\n        .set(\&quot;Accept\&quot;, \&quot;application/json\&quot;);\n    expect(resBid.status).to.equal(400);\n}\ncatch (error) {\n    // pass!\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;04f3e1f6-2b7a-46bf-bad8-4c53e204e0ba&quot;,&quot;parentUUID&quot;:&quot;36ce3071-784e-4d7a-a1ce-1c1f70d1f73e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b84f8dfb-20d7-4e3c-8136-e348941b9fbc&quot;,&quot;5a8de533-81f5-456c-9668-97ebac9c2aac&quot;,&quot;b6acfcf6-df4c-4659-8564-1835885fecd9&quot;,&quot;ff2eef45-b88c-46d6-9c87-9e087850fef8&quot;,&quot;9823591e-de86-4c99-b760-e212743123b4&quot;,&quot;a60fed87-3a43-4fdd-baee-c75b7f072eff&quot;,&quot;6fe232f7-ab1e-4619-ac5b-1a1fb232957d&quot;,&quot;54e8beab-8b0f-4bd8-b195-f3149ed7d016&quot;,&quot;f7bd2ab8-be3d-4327-893b-c9aeaee4f347&quot;,&quot;f981a493-b64c-4460-b1ed-22851a775938&quot;,&quot;7fc4cc0d-581f-4abe-a784-4178be71f944&quot;,&quot;e1168e07-572d-47aa-81b6-c195de7a5ec2&quot;,&quot;04f3e1f6-2b7a-46bf-bad8-4c53e204e0ba&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1171,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;3d8dba63-fe84-4573-ac66-849afc980dd5&quot;,&quot;title&quot;:&quot;User Routes (with auth)&quot;,&quot;fullFile&quot;:&quot;/Users/janieholzmann/Documents/cpsc-455-group/src/backend/tests/integration/api-user.test.ts&quot;,&quot;file&quot;:&quot;/src/backend/tests/integration/api-user.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;User Routes (with auth)\&quot;&quot;,&quot;fullTitle&quot;:&quot;User Routes (with auth) \&quot;before all\&quot; hook in \&quot;User Routes (with auth)\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:939,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(10000);\nif (!getAdminApps().length) {\n    // Only initialize if not initialized yet, with projectId here if you want\n    initAdminApp({\n        credential: cert(path.join(__dirname, \&quot;../config/firebase-service-account.json\&quot;)),\n        projectId: \&quot;flipper-ae6d1\&quot;,\n    });\n}\nconst adminAuth = admin.auth();\nconst userRecord = await adminAuth.createUser({\n    email: testUser.email,\n    password: \&quot;testpassword\&quot;,\n    displayName: testUser.name,\n});\ntestUserId = userRecord.uid;\ntestUser.id = testUserId;\nconst customToken = await adminAuth.createCustomToken(testUserId);\nconst fetch = (await import(\&quot;node-fetch\&quot;)).default;\nconst apiKey = firebaseConfig.apiKey;\nconst response = await fetch(`https://identitytoolkit.googleapis.com/v1/accounts:signInWithCustomToken?key=${apiKey}`, {\n    method: \&quot;POST\&quot;,\n    headers: { \&quot;Content-Type\&quot;: \&quot;application/json\&quot; },\n    body: JSON.stringify({ token: customToken, returnSecureToken: true }),\n});\nconst data = (await response.json());\nidToken = data.idToken;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8c1389cb-5a7f-434a-97e3-5117ba393994&quot;,&quot;parentUUID&quot;:&quot;3d8dba63-fe84-4573-ac66-849afc980dd5&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;User Routes (with auth)\&quot;&quot;,&quot;fullTitle&quot;:&quot;User Routes (with auth) \&quot;after all\&quot; hook in \&quot;User Routes (with auth)\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:407,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;if (createdUserId)\n    await admin.auth().deleteUser(createdUserId).catch(console.error);\nif (testUserId)\n    await admin.auth().deleteUser(testUserId).catch(console.error);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c39c03e8-8628-4862-8d0a-ab9ffff7cc9d&quot;,&quot;parentUUID&quot;:&quot;3d8dba63-fe84-4573-ac66-849afc980dd5&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a user (POST /users) with auth&quot;,&quot;fullTitle&quot;:&quot;User Routes (with auth) should create a user (POST /users) with auth&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:99,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app)\n    .post(\&quot;/api/users\&quot;)\n    .set(\&quot;Authorization\&quot;, `Bearer ${idToken}`)\n    .send({ user: testUser });\nexpect(res.status).to.equal(200);\nexpect(res.body).to.have.property(\&quot;id\&quot;, testUserId);\ncreatedUserId = res.body.id;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7d16641d-9153-424a-b8d9-18f1608db5ce&quot;,&quot;parentUUID&quot;:&quot;3d8dba63-fe84-4573-ac66-849afc980dd5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get user by id (PUT /users/get-or-create/:userId) without auth&quot;,&quot;fullTitle&quot;:&quot;User Routes (with auth) should get user by id (PUT /users/get-or-create/:userId) without auth&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:38,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app).put(`/api/users/get-or-create/${testUserId}`);\nexpect(res.status).to.equal(200);\nexpect(res.body).to.have.property(\&quot;id\&quot;, testUserId);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;56f149da-ec6b-499f-b463-c0f3727b9e4a&quot;,&quot;parentUUID&quot;:&quot;3d8dba63-fe84-4573-ac66-849afc980dd5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update user info (PATCH /users/by-id/:userId) with auth&quot;,&quot;fullTitle&quot;:&quot;User Routes (with auth) should update user info (PATCH /users/by-id/:userId) with auth&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:38,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const updates = { bio: \&quot;Updated bio\&quot; };\nconst res = await request(app)\n    .patch(`/api/users/by-id/${testUserId}`)\n    .set(\&quot;Authorization\&quot;, `Bearer ${idToken}`)\n    .send({ updates });\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dca03726-4be9-4246-b43c-5b71eee8c301&quot;,&quot;parentUUID&quot;:&quot;3d8dba63-fe84-4573-ac66-849afc980dd5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should NOT update user info with invalid auth&quot;,&quot;fullTitle&quot;:&quot;User Routes (with auth) should NOT update user info with invalid auth&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const updates = { bio: \&quot;Fail update\&quot; };\nconst res = await request(app)\n    .patch(`/api/users/by-id/${testUserId}`)\n    .set(\&quot;Authorization\&quot;, `Bearer invalidtoken`)\n    .send({ updates });\nexpect(res.status).to.equal(401);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eace66b5-7cbc-46a1-8cd0-2e418b9c41e6&quot;,&quot;parentUUID&quot;:&quot;3d8dba63-fe84-4573-ac66-849afc980dd5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should add product to wishlist (PUT /users/wishlist/by-user-and-product-id/:userId/:productId)&quot;,&quot;fullTitle&quot;:&quot;User Routes (with auth) should add product to wishlist (PUT /users/wishlist/by-user-and-product-id/:userId/:productId)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:71,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const dummyProductId = \&quot;dummy-product-id\&quot;;\nconst res = await request(app)\n    .put(`/api/users/wishlist/by-user-and-product-id/${testUserId}/${dummyProductId}`)\n    .set(\&quot;Authorization\&quot;, `Bearer ${idToken}`);\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ba5e1ba2-5988-49d4-9fb3-09535ca6b0fd&quot;,&quot;parentUUID&quot;:&quot;3d8dba63-fe84-4573-ac66-849afc980dd5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get wishlist (GET /users/wishlist/by-user-id/:userId) without auth&quot;,&quot;fullTitle&quot;:&quot;User Routes (with auth) should get wishlist (GET /users/wishlist/by-user-id/:userId) without auth&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:65,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app).get(`/api/users/wishlist/by-user-id/${testUserId}`);\nexpect(res.status).to.equal(200);\nexpect(res.body).to.be.an(\&quot;array\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f80f4a89-9c71-4d5b-b7aa-cb6b876bb9eb&quot;,&quot;parentUUID&quot;:&quot;3d8dba63-fe84-4573-ac66-849afc980dd5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should delete user (DELETE /users) with auth&quot;,&quot;fullTitle&quot;:&quot;User Routes (with auth) should delete user (DELETE /users) with auth&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:36,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app)\n    .delete(\&quot;/api/users\&quot;)\n    .set(\&quot;Authorization\&quot;, `Bearer ${idToken}`);\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c34790d6-a27a-42ab-b155-69487255daf9&quot;,&quot;parentUUID&quot;:&quot;3d8dba63-fe84-4573-ac66-849afc980dd5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not delete user (DELETE /users) without auth&quot;,&quot;fullTitle&quot;:&quot;User Routes (with auth) should not delete user (DELETE /users) without auth&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    const res = await request(app).delete(\&quot;/api/users\&quot;);\n    expect(res.status).to.equal(403);\n}\ncatch (error) {\n    // pass\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b9703d9a-e94a-4d7b-b00f-936213e28db1&quot;,&quot;parentUUID&quot;:&quot;3d8dba63-fe84-4573-ac66-849afc980dd5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get recommendations for user&quot;,&quot;fullTitle&quot;:&quot;User Routes (with auth) should get recommendations for user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:772,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const thisTestUserId = \&quot;user_001\&quot;;\nconst adminAuth = admin.auth();\nconst customToken = await adminAuth.createCustomToken(thisTestUserId);\nconst fetch = (await import(\&quot;node-fetch\&quot;)).default;\nconst apiKey = firebaseConfig.apiKey;\nconst response = await fetch(`https://identitytoolkit.googleapis.com/v1/accounts:signInWithCustomToken?key=${apiKey}`, {\n    method: \&quot;POST\&quot;,\n    headers: { \&quot;Content-Type\&quot;: \&quot;application/json\&quot; },\n    body: JSON.stringify({\n        token: customToken,\n        returnSecureToken: true,\n    }),\n});\nconst data = (await response.json());\nconst thisCustomToken = data.idToken;\n// const thisCustomToken =\n// \t\&quot;eyJhbGciOiJSUzI1NiIsImtpZCI6ImE4ZGY2MmQzYTBhNDRlM2RmY2RjYWZjNmRhMTM4Mzc3NDU5ZjliMDEiLCJ0eXAiOiJKV1QifQ.eyJuYW1lIjoiQWxpY2UgSm9obnNvbiIsImlzcyI6Imh0dHBzOi8vc2VjdXJldG9rZW4uZ29vZ2xlLmNvbS9mbGlwcGVyLWFlNmQxIiwiYXVkIjoiZmxpcHBlci1hZTZkMSIsImF1dGhfdGltZSI6MTc1Mjg3NjgyNywidXNlcl9pZCI6InVzZXJfMDAxIiwic3ViIjoidXNlcl8wMDEiLCJpYXQiOjE3NTI4NzY4MjcsImV4cCI6MTc1Mjg4MDQyNywiZW1haWwiOiJhbGljZS5qb2huc29uQGV4YW1wbGUuY29tIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJmaXJlYmFzZSI6eyJpZGVudGl0aWVzIjp7ImVtYWlsIjpbImFsaWNlLmpvaG5zb25AZXhhbXBsZS5jb20iXX0sInNpZ25faW5fcHJvdmlkZXIiOiJwYXNzd29yZCJ9fQ.xpOIqJEsowtlGaT3A1eFAADMsVrphiySw1lUocmOSd_a2EGBNaUBG0Mc1qDbWFBeJU_0LlvSg0U37c8Gg_DA9j8IRSfS62IDFoAtqQuS5zzAC1Z6sBIqxDQKF71xK-mYlLnzcom8S1rY_mX5JWC0wEkIEcpulw3X2WQzXS2tGiJZnEDeYUxtxRQgIth1SukJssd1vqmjttdsZrCf_h_lTpha5BTPVBHmiJNSPUZYm_2Fnq3iMD_YUr4c8Bx4xuHTJT88DjnjyK3du2B2mnx0QRjn8YMVcNBAGhWoAyKrt46TBd7WNFDOdOyldir4NfhrMLLD7WB8ZmUW83NLytwqvw\&quot;;\ntry {\n    const res = await request(app)\n        .get(`/api/recommendations/${thisTestUserId}`)\n        .set(\&quot;Authorization\&quot;, `Bearer ${thisCustomToken}`);\n    expect(res.status).to.equal(200);\n}\ncatch (_err) {\n    throw new Error(\&quot;this shouldn&#x27;t happen :(\&quot;);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bd45f203-38df-4d62-9bf5-3ed20b8eea39&quot;,&quot;parentUUID&quot;:&quot;3d8dba63-fe84-4573-ac66-849afc980dd5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7d16641d-9153-424a-b8d9-18f1608db5ce&quot;,&quot;56f149da-ec6b-499f-b463-c0f3727b9e4a&quot;,&quot;dca03726-4be9-4246-b43c-5b71eee8c301&quot;,&quot;eace66b5-7cbc-46a1-8cd0-2e418b9c41e6&quot;,&quot;ba5e1ba2-5988-49d4-9fb3-09535ca6b0fd&quot;,&quot;f80f4a89-9c71-4d5b-b7aa-cb6b876bb9eb&quot;,&quot;c34790d6-a27a-42ab-b155-69487255daf9&quot;,&quot;b9703d9a-e94a-4d7b-b00f-936213e28db1&quot;,&quot;bd45f203-38df-4d62-9bf5-3ed20b8eea39&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1126,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;da4a3006-81f7-41c3-bf07-588873037813&quot;,&quot;title&quot;:&quot;Testing product functionality through firebase directly&quot;,&quot;fullFile&quot;:&quot;/Users/janieholzmann/Documents/cpsc-455-group/src/backend/tests/integration/firebase-product.test.ts&quot;,&quot;file&quot;:&quot;/src/backend/tests/integration/firebase-product.test.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;Testing product functionality through firebase directly\&quot;&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through firebase directly \&quot;before each\&quot; hook in \&quot;Testing product functionality through firebase directly\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:59,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;product = await addProduct(testProduct);\nproductId = product.id;\nproductIds.push(productId);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c2bf6ac4-2211-4d74-9ca0-2eb4a121bb55&quot;,&quot;parentUUID&quot;:&quot;da4a3006-81f7-41c3-bf07-588873037813&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;Testing product functionality through firebase directly\&quot;&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through firebase directly \&quot;after each\&quot; hook in \&quot;Testing product functionality through firebase directly\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:25,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await Promise.all(productIds.map((id) =&gt; deleteProduct(id)));\nproductIds.length = 0; // clear the array&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;811c32a4-f1c2-404c-b186-c3e95fe9cd07&quot;,&quot;parentUUID&quot;:&quot;da4a3006-81f7-41c3-bf07-588873037813&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should add a product&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through firebase directly should add a product&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    expect(productId).to.exist;\n}\ncatch (err) {\n    throw new Error(`Error adding product: ${err.message}`);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0fc80580-51c1-472f-83ee-b07a30787a9d&quot;,&quot;parentUUID&quot;:&quot;da4a3006-81f7-41c3-bf07-588873037813&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fetch product by ID&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through firebase directly should fetch product by ID&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:19,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    let fetchedProduct = await getProductById(productId);\n    expect(fetchedProduct).to.exist;\n    expect(fetchedProduct.name).to.equal(testProduct.name);\n}\ncatch (err) {\n    throw new Error(`Error fetching by ID: ${err.message}`);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1cd01421-5d22-4c86-a12c-2e2080e88e11&quot;,&quot;parentUUID&quot;:&quot;da4a3006-81f7-41c3-bf07-588873037813&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fetch all products&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through firebase directly should fetch all products&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:114,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    const product2 = await addProduct(testProduct);\n    const productId2 = product2.id;\n    productIds.push(productId2);\n    const products = await getAllProducts();\n    expect(products).to.be.an(\&quot;array\&quot;);\n    expect(products.length).to.be.gte(2);\n}\ncatch (err) {\n    throw new Error(`Error fetching all products: ${err.message}`);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;21da69de-07f9-43e2-bee8-e8b69966e60d&quot;,&quot;parentUUID&quot;:&quot;da4a3006-81f7-41c3-bf07-588873037813&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should search products with &#x27;chair&#x27;&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through firebase directly should search products with &#x27;chair&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:35,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    const results = await searchProducts(\&quot;chair\&quot;);\n    expect(results).to.be.an(\&quot;array\&quot;);\n    expect(results.some((p) =&gt; p.name.toLowerCase().includes(\&quot;chair\&quot;))).to.be\n        .true;\n}\ncatch (err) {\n    throw new Error(`Error searching products: ${err.message}`);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fdac6d3e-ec7b-4010-a8a5-006ecff6920b&quot;,&quot;parentUUID&quot;:&quot;da4a3006-81f7-41c3-bf07-588873037813&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get products in category &#x27;Accessories&#x27;&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through firebase directly should get products in category &#x27;Accessories&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:52,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    const products = await getProductsInCategory(testCategoryId);\n    expect(products).to.be.an(\&quot;array\&quot;);\n    expect(products.some((p) =&gt; p.categories.includes(testCategoryId))).to.be\n        .true;\n}\ncatch (err) {\n    throw new Error(`Error fetching products in category: ${err.message}`);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;75be833e-f669-4f08-be26-c510ea15d5bd&quot;,&quot;parentUUID&quot;:&quot;da4a3006-81f7-41c3-bf07-588873037813&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update product price&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through firebase directly should update product price&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:101,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    await updateProduct(productId, { price: 59.99 });\n    const updatedProduct = await getProductById(productId);\n    expect(updatedProduct.price).to.equal(59.99);\n}\ncatch (err) {\n    throw new Error(`Error updating price: ${err.message}`);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;144a7271-960d-493b-aaf5-6b4158276b99&quot;,&quot;parentUUID&quot;:&quot;da4a3006-81f7-41c3-bf07-588873037813&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update product status&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through firebase directly should update product status&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:105,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    await updateProduct(productId, { status: \&quot;Sold\&quot; });\n    const updatedProduct = await getProductById(productId);\n    expect(updatedProduct.status).to.equal(\&quot;Sold\&quot;);\n}\ncatch (err) {\n    throw new Error(`Error updating status: ${err.message}`);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;aaa00cd0-88e0-46a8-9ece-06644ce4164f&quot;,&quot;parentUUID&quot;:&quot;da4a3006-81f7-41c3-bf07-588873037813&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should delete product&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through firebase directly should delete product&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:61,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;expect(productId).to.exist;\nawait deleteProduct(productId);\ntry {\n    await getProductById(productId);\n    throw new Error(\&quot;Product still exists after deletion\&quot;);\n}\ncatch (err) {\n    expect(err.message).to.include(\&quot;Product not found\&quot;);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;57f7b9d2-1d03-40e5-bff5-53e07d6b70f5&quot;,&quot;parentUUID&quot;:&quot;da4a3006-81f7-41c3-bf07-588873037813&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail to delete the same product again&quot;,&quot;fullTitle&quot;:&quot;Testing product functionality through firebase directly should fail to delete the same product again&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:160,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n    await deleteProduct(productId);\n    throw new Error(\&quot;Expected deleteProduct to throw, but it succeeded\&quot;);\n}\ncatch (error) {\n    expect(error).to.exist;\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d1086004-a9d9-4d82-a9dd-7b71b79f017b&quot;,&quot;parentUUID&quot;:&quot;da4a3006-81f7-41c3-bf07-588873037813&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0fc80580-51c1-472f-83ee-b07a30787a9d&quot;,&quot;1cd01421-5d22-4c86-a12c-2e2080e88e11&quot;,&quot;21da69de-07f9-43e2-bee8-e8b69966e60d&quot;,&quot;fdac6d3e-ec7b-4010-a8a5-006ecff6920b&quot;,&quot;75be833e-f669-4f08-be26-c510ea15d5bd&quot;,&quot;144a7271-960d-493b-aaf5-6b4158276b99&quot;,&quot;aaa00cd0-88e0-46a8-9ece-06644ce4164f&quot;,&quot;57f7b9d2-1d03-40e5-bff5-53e07d6b70f5&quot;,&quot;d1086004-a9d9-4d82-a9dd-7b71b79f017b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:647,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:10000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;11.7.1&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;7.1.3&quot;},&quot;marge&quot;:{&quot;version&quot;:&quot;6.2.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;reportDir&quot;:&quot;mochawesome-report&quot;,&quot;reportTitle&quot;:&quot;cpsc-455-group&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;mochawesome-report/assets&quot;,&quot;jsonFile&quot;:&quot;/Users/janieholzmann/Documents/cpsc-455-group/mochawesome-report/mochawesome.json&quot;,&quot;htmlFile&quot;:&quot;/Users/janieholzmann/Documents/cpsc-455-group/mochawesome-report/mochawesome.html&quot;}"><div id="report"></div><script src="assets/app.js"></script></body></html>